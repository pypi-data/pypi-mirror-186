!function(){function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var t,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,r)||i(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw a}}}}function i(e,r){if(e){if("string"==typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,r):void 0}}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}System.register(["vue","vue-content-loader"],(function(r,t){"use strict";var i,a,l,u,c,s,f,h,d,p,m,y,v,g;return{setters:[function(e){i=e.defineComponent,a=e.resolveComponent,l=e.openBlock,u=e.createBlock,c=e.withCtx,s=e.createElementBlock,f=e.Fragment,h=e.renderList,d=e.createElementVNode,p=e.ref,m=e.createTextVNode,y=e.toDisplayString,v=e.createCommentVNode},function(e){g=e.ContentLoader}],execute:function(){var r,t=null!==(r=globalThis.udata_front)&&void 0!==r?r:{components:{},translations:[]};globalThis.udata_front=t;var w={csvapiUrl:null,dataEndpoint:null,filters:[],page:1,pageSize:10,sortBy:null,sortDesc:!1,totalRows:0};function b(e){w=n(n({},w),e)}function x(e){var r=function(e){var r=0;if(e&&"page"===e?r=w.pageSize*(w.page-1):w.page=1,!w.dataEndpoint)throw Error("No dataEndpoint configured. Use configure() before to add it.");var n=new URL(w.dataEndpoint);if(n.searchParams.set("_shape","objects"),n.searchParams.set("_rowid","hide"),n.searchParams.set("_size",w.pageSize.toString()),n.searchParams.set("_offset",r.toString()),w.filters.forEach((function(e){var r=e.field,t=e.value,o=e.comp;n.searchParams.set("".concat(r,"__").concat(o),t)})),w.sortBy){var t=w.sortDesc?"_sort_desc":"_sort";n.searchParams.set(t,w.sortBy)}return n}(e);return fetch(r.toString()).then((function(e){var r=e.json();return e.ok||Promise.reject(r),r}))}function z(e){return function(e,r){var n=document.querySelector(e);return n?n.getAttribute(r):null}("meta[name=".concat(e,"]"),"content")}var P=z("tabular-csvapi-url"),S=z("tabular-page-size"),E=function(r,n){var t,i=r.__vccOpts||r,a=o(n);try{for(a.s();!(t=a.n()).done;){var l=e(t.value,2),u=l[0],c=l[1];i[u]=c}}catch(s){a.e(s)}finally{a.f()}return i},j=i({components:{ContentLoader:g},setup:function(){return{getY:function(e){return 20+56*e}}}}),O=d("rect",{x:"16",y:"16",rx:"4",ry:"4",width:"112",height:"24"},null,-1),_=d("rect",{x:"160",y:"16",rx:"4",ry:"4",width:"116",height:"24"},null,-1),C=d("rect",{x:"308",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1),k=d("rect",{x:"480",y:"16",rx:"4",ry:"4",width:"106",height:"24"},null,-1),T=d("rect",{x:"618",y:"16",rx:"4",ry:"4",width:"140",height:"24"},null,-1),A=d("rect",{x:"790",y:"16",rx:"4",ry:"4",width:"144",height:"24"},null,-1),U=d("rect",{x:"966",y:"16",rx:"4",ry:"4",width:"142",height:"24"},null,-1),L=d("rect",{x:"4",y:"56",rx:"4",ry:"4",width:"1116",height:"4"},null,-1),Y=["y"],D=["y"],B=["y"],I=["y"],N=["y"],$=["y"],R=["y"];var V=i({components:{Loader:E(j,[["render",function(e,r,n,t,o,i){var p=a("ContentLoader");return l(),u(p,{width:1124,height:300,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},{default:c((function(){return[O,_,C,k,T,A,U,L,(l(),s(f,null,h(5,(function(r){return l(),s(f,null,[d("rect",{x:"16",y:e.getY(r),rx:"4",ry:"4",width:"112",height:"32"},null,8,Y),d("rect",{x:"160",y:e.getY(r),rx:"4",ry:"4",width:"116",height:"32"},null,8,D),d("rect",{x:"308",y:e.getY(r),rx:"4",ry:"4",width:"140",height:"32"},null,8,B),d("rect",{x:"480",y:e.getY(r),rx:"4",ry:"4",width:"106",height:"32"},null,8,I),d("rect",{x:"618",y:e.getY(r),rx:"4",ry:"4",width:"140",height:"32"},null,8,N),d("rect",{x:"790",y:e.getY(r),rx:"4",ry:"4",width:"144",height:"32"},null,8,$),d("rect",{x:"966",y:e.getY(r),rx:"4",ry:"4",width:"142",height:"32"},null,8,R)],64)})),64))]})),_:1})}]])},props:{resource:{type:Object,required:!0}},setup:function(e){var r=p([]),n=p([]),t=p(null),o=p(null),i=p(!0),a=p(!1);return b({csvapiUrl:P,pageSize:S}),function(e){if(!w.csvapiUrl)throw Error("No csvapiUrl configured. Use configure() before to add it.");var r=new URL(w.csvapiUrl);return r.pathname="/apify",r.searchParams.set("url",encodeURI(e)),r.searchParams.set("analysis","yes"),fetch(r.toString()).then((function(e){var r=e.json();return e.ok||Promise.reject(r),r}))}(e.resource.url).then((function(e){if(e.ok)return b({dataEndpoint:e.endpoint}),x("apify").then((function(e){e.ok?(n.value=e.rows,r.value=e.columns,t.value=e.total,o.value=e.columns.length):a.value=!0})).catch((function(){return a.value=!0})).finally((function(){return i.value=!1}));a.value=!0,i.value=!1})).catch((function(){a.value=!0,i.value=!1})),{hasError:a,loading:i,columns:r,rows:n,rowCount:t,columnCount:o,tabular_page_size:S}}}),q={key:0,class:"bg-alt-green-tilleul-verveine fr-p-3v fr-my-2w"},M={class:"fr-grid-row fr-m-0"},F=d("span",{class:"fr-icon-warning-line","aria-hidden":"true"},null,-1),G={class:"fr-table fr-table--no-background fr-p-0 fr-pt-0-5v fr-m-0"},H={class:"fr-mb-3w"},J={class:"fr-sr-only"},K={scope:"col"},Q={class:"fr-grid-row fr-grid-row--gutters fr-grid-row--middle fr-px-5v"},W={class:"fr-col"},X={class:"fr-col-auto"},Z=["href"];!function(e,r,n,o){t.components[e]||(t.components[e]=[]);var i={component:r,hook:e,module:n,name:o};t.components[e].push(i)}("explore",E(V,[["render",function(e,r,n,t,o,i){var c=a("Loader");return l(),s(f,null,[e.hasError?(l(),s("div",q,[d("p",M,[F,m(" "+y(e.$t("The preview of this file failed to load.")),1)])])):v("",!0),e.loading?(l(),u(c,{key:1})):v("",!0),e.hasError||e.loading?v("",!0):(l(),s(f,{key:2},[d("div",G,[d("table",H,[d("caption",J,y(e.$t("Preview of {name}",{name:e.resource.title})),1),d("thead",null,[d("tr",null,[(l(!0),s(f,null,h(e.columns,(function(e){return l(),s("th",K,y(e),1)})),256))])]),d("tbody",null,[(l(!0),s(f,null,h(e.rows,(function(r){return l(),s("tr",null,[(l(!0),s(f,null,h(e.columns,(function(e){return l(),s("td",null,y(r[e]),1)})),256))])})),256))])])]),d("div",Q,[d("div",W,y(e.$t("{count} columns",e.columnCount))+" — "+y(e.$t("Showing the first {shown} of {count} rows",{shown:Math.min(e.tabular_page_size,e.rowCount),count:e.rowCount})),1),d("div",X,[d("a",{href:e.resource.preview_url,class:"fr-btn fr-btn--icon-left fr-icon-test-tube-line"},y(e.$t("Explore data")),9,Z)])])],64))],64)}]]),"udata-tabular-preview","explore"),function(e,r){var n={messages:e,module:r};t.translations.push(n)}({en:{"Preview of {name}":function(e){return(0,e.normalize)(["Preview of ",(0,e.interpolate)((0,e.named)("name"))])},"{count} columns":function(e){var r=e.normalize,n=e.interpolate,t=e.named;return(0,e.plural)([r([n(t("count"))," columns"]),r([n(t("count"))," column"]),r([n(t("count"))," columns"])])},"Showing the first {shown} of {count} rows":function(e){var r=e.normalize,n=e.interpolate,t=e.named;return(0,e.plural)([r(["No rows in file"]),r(["Showing the only row"]),r(["Showing the first ",n(t("shown"))," of ",n(t("count"))," rows"])])},"Explore data":function(e){return(0,e.normalize)(["Explore data"])},"The preview of this file failed to load.":function(e){return(0,e.normalize)(["The preview of this file failed to load."])}},es:{"Preview of {name}":function(e){return(0,e.normalize)([])},"{count} columns":function(e){return(0,e.normalize)([])},"Showing the first {shown} of {count} rows":function(e){return(0,e.normalize)([])},"Explore data":function(e){return(0,e.normalize)([])},"The preview of this file failed to load.":function(e){return(0,e.normalize)([])}},fr:{"Preview of {name}":function(e){return(0,e.normalize)(["Prévisualisation de ",(0,e.interpolate)((0,e.named)("name"))])},"{count} columns":function(e){var r=e.normalize,n=e.interpolate,t=e.named;return(0,e.plural)([r([n(t("count"))," colonnes"]),r([n(t("count"))," colonne"]),r([n(t("count"))," colonnes"])])},"Showing the first {shown} of {count} rows":function(e){var r=e.normalize,n=e.interpolate,t=e.named;return(0,e.plural)([r(["Pas de ligne dans le fichier"]),r(["Affichage de la seule ligne"]),r(["Affichage des ",n(t("shown"))," premières lignes sur ",n(t("count"))])])},"Explore data":function(e){return(0,e.normalize)(["Explorer les données"])},"The preview of this file failed to load.":function(e){return(0,e.normalize)(["La prévisualisation de ce fichier n'a pas pu être chargée."])}},it:{"Preview of {name}":function(e){return(0,e.normalize)([])},"{count} columns":function(e){return(0,e.normalize)([])},"{count} rows":function(e){return(0,e.normalize)([])},"Explore data":function(e){return(0,e.normalize)([])},"The preview of this file failed to load.":function(e){return(0,e.normalize)([])}},sr:{"Preview of {name}":function(e){return(0,e.normalize)([])},"{count} columns":function(e){return(0,e.normalize)([])},"{count} rows":function(e){return(0,e.normalize)([])},"Explore data":function(e){return(0,e.normalize)([])},"The preview of this file failed to load.":function(e){return(0,e.normalize)([])}}},"udata-tabular-preview")}}}))}();
