(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionSpans_index_tsx-node_modules_downsample_m-9302a4"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>P}),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react/index.js"),s=n("../node_modules/@sentry/core/esm/exports.js"),a=n("../node_modules/lodash/assign.js"),o=n.n(a),i=n("../node_modules/lodash/flatten.js"),l=n.n(i),c=n("../node_modules/lodash/memoize.js"),u=n.n(c),p=n("../node_modules/lodash/omit.js"),d=n.n(p),m=n("./app/actionCreators/tags.tsx"),g=n("./app/components/smartSearchBar/index.tsx"),h=n("./app/constants/index.tsx"),f=n("./app/types/index.tsx"),v=n("./app/utils.tsx"),y=n("./app/utils/discover/fields.tsx"),x=n("./app/utils/fields/index.ts"),S=n("./app/utils/measurements/measurements.tsx"),w=n("./app/utils/useApi.tsx"),b=n("./app/utils/withTags.tsx"),T=n("./app/views/dashboardsV2/utils.tsx"),j=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const E=new RegExp(`^${h.c$}|\\${h.ir}`,"g"),Z=new Set(Object.keys(y.wZ)),k=Object.keys(y.wZ).reduce(((e,t)=>(e[t]={...y.wZ[t],kind:x.IV.FIELD},e)),{}),_=d()(k,y.J8),C=y.$4.reduce(((e,t)=>(e[t]={name:t,kind:x.IV.METRICS},e)),{}),M=Object.keys(y.jg).reduce(((e,t)=>(e[t]={...y.jg[t],kind:x.IV.FIELD},e)),{});function O(e){const{maxSearchItems:t,organization:n,tags:a,omitTags:i,fields:c,projectIds:p,includeSessionTagsValues:h,maxMenuHeight:b,customMeasurements:O}=e,P=(0,w.Z)(),I=(0,r.useRef)(!1),A=(0,r.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(Z.has(t.field)||(0,y.GO)(t.field)||(0,T.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:x.IV.FUNCTION}),e)),{}):[])(c)),[c]),q=(0,r.useMemo)((()=>Object.keys(a).reduce(((e,t)=>(e[t]={...a[t],kind:x.IV.TAG},e)),{})),[a]);(0,r.useEffect)((()=>{L.cache.clear?.()}),[p]);const L=u()(((e,t,r)=>{const s=p?.map(String);return(0,y.h1)(e.key)||(0,y.Xr)(e.key)?Promise.resolve([]):(0,m.Fo)({api:P,orgSlug:n.slug,tagKey:e.key,search:t,projectIds:s,endpointParams:r,includeTransactions:!0,includeSessions:h}).then((e=>l()(e.filter((e=>{let{name:t}=e;return(0,v.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:n}=e;return`${n}-${t}`})),N=e=>{let t;!I.current&&Object.keys(a).length>0&&(t=s.Yr({name:"SearchBar.getTagList"}),I.current=!0);const r=((e,t)=>{const n=Object.keys(e).reduce(((t,n)=>(t[n]={...e[n],kind:x.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,n)=>(e[n]={...t[n],kind:x.IV.MEASUREMENT},e)),n):n})(e,O),l=n.features.includes("performance-view")?Object.assign({},r,A,C,k):Object.assign({},_);o()(l,q,k,M),l.has={key:x.Sh.HAS,name:"Has property",values:Object.keys(l).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:x.IV.FIELD};const c=i&&i.length>0?d()(l,i):l;if(t){const e=Object.keys(c).length;t.setTag("tags.totalCount",e);const n=[1,5,10,20,50,100,200,300,400,500,600,700,800,900,1e3,1e4].find((t=>e<=t));t.setTag("tags.totalCount.grouped",`<=${n}`),t.finish()}return c};return(0,j.tZ)(S.Z,{children:n=>{let{measurements:r}=n;return(0,j.tZ)(g.Z,{hasRecentSearches:!0,savedSearchType:f.L4.EVENT,onGetTagValues:L,supportedTags:N(r),prepareQuery:e=>e.replace(E,""),maxSearchItems:t,excludedTags:[x.Sh.ENVIRONMENT,x.Sh.TOTAL_COUNT],maxMenuHeight:b??300,customPerformanceMetrics:O,...e})}})}O.displayName="SearchBar";const P=(0,b.Z)(O)},"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/lodash/omit.js"),o=n.n(a),i=n("./app/components/links/link.tsx"),l=n("./app/icons/index.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{align:t,title:n,canSort:r,generateSortLink:a,onClick:o,direction:i,replace:l}=e;const u=a();if(!u||!r)return(0,c.tZ)(d,{align:t,children:n});const g=i?(0,c.tZ)(m,{size:"xs",direction:"desc"===i?"down":"up"}):null;return(0,c.BX)(p,{align:t,to:u,onClick:e=>{l&&(e.preventDefault(),s.browserHistory.replace(u)),o?.(e)},children:[n," ",g]})}u.displayName="SortLink";const p=(0,r.Z)((e=>{const t=o()(e,["align","css"]);return(0,c.tZ)(i.Z,{...t})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),d=(0,r.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,r.Z)(l.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),g=u},"./app/utils/discover/discoverQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,_:()=>i});var r=n("./app/utils/discover/genericDiscoverQuery.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function o(e){return(0,s.tZ)(r.ZP,{route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:n,...r}=e.meta??{};return{...e,meta:{...n,...r}}},...e})}function i(e){return(0,r.JC)({route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:n,...r}=e.meta??{};return{...e,meta:{...n,...r}}},...e})}o.displayName="DiscoverQuery";const l=o},"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("../node_modules/lodash/omit.js"),s=n.n(r),a=n("./app/utils.tsx"),o=n("./app/utils/discover/genericDiscoverQuery.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){const{perSuspect:t,spanOps:n,spanGroups:r,minExclusiveTime:s,maxExclusiveTime:o}=e,i={perSuspect:t,spanOp:n,spanGroup:r,min_exclusive_time:s,max_exclusive_time:o};(0,a.ri)(i.perSuspect)||delete i.perSuspect,(0,a.ri)(i.spanOp)||delete i.spanOp,(0,a.ri)(i.spanGroup)||delete i.spanGroup;const l=e.eventView.getEventsAPIPayload(e.location);return{...i,...l}}function c(e){return(0,i.tZ)(o.ZP,{route:"events-spans-performance",getRequestPayload:l,...s()(e,"children"),children:t=>{let{tableData:n,...r}=t;return e.children({suspectSpans:n,...r})}})}c.displayName="SuspectSpansQuery";const u=c},"./app/utils/withTags.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/react/index.js"),a=n("./app/stores/tagStore.tsx"),o=n("./app/utils/getDisplayName.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{tags:a.Z.getState()}),(0,r.Z)(this,"unsubscribe",a.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,i.tZ)(e,{tags:t??this.state.tags,...n})}}return t.displayName="WithTags",(0,r.Z)(t,"displayName",`withTags(${(0,o.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionSpans/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var r=n("./app/locale.tsx"),s=n("./app/utils/withOrganization.tsx"),a=n("./app/utils/withProjects.tsx"),o=n("./app/views/performance/transactionSummary/pageLayout.tsx"),i=n("./app/views/performance/transactionSummary/tabs.tsx"),l=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),c=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),u=n("../node_modules/react-router/es/index.js"),p=n("../node_modules/lodash/omit.js"),d=n.n(p),m=n("./app/components/compactSelect.tsx"),g=n("./app/components/datePageFilter.tsx"),h=n("./app/components/environmentPageFilter.tsx"),f=n("./app/components/events/searchBar.tsx"),v=n("./app/components/layouts/thirds.tsx"),y=n("./app/components/organizations/pageFilterBar.tsx"),x=n("./app/components/organizations/pageFilters/parse.tsx"),S=n("./app/components/pagination.tsx"),w=n("./app/styles/space.tsx"),b=n("./app/utils.tsx"),T=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),j=n("./app/utils/discover/discoverQuery.tsx"),E=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),Z=n("./app/utils/queryString.tsx"),k=n("./app/utils/useProjects.tsx"),_=n("./app/components/performance/waterfall/utils.tsx"),C=n("./app/icons/index.tsx"),M=n("./app/utils/discover/genericDiscoverQuery.tsx"),O=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function P(e){return(0,O.tZ)(M.ZP,{route:"events-span-ops",limit:20,...d()(e,"children"),children:t=>{let{tableData:n,...r}=t;return e.children({spanOps:n,...r})}})}P.displayName="SpanOpsQuery";const I=P;var A=n("./app/utils/tokenizeSearch.tsx");function q(e){let{spanOps:t,isLoading:n,error:s}=e;return n?[{key:"isLoading",disabled:!0,label:(0,r.t)("Loadingâ€¦")}]:s?[{key:"error",disabled:!0,label:(0,r.t)("Error loading operations"),leadingItems:(0,O.tZ)(C.FC,{color:"subText"})}]:t.map((e=>({value:e.op,label:e.op,leadingItems:(0,O.tZ)(N,{backgroundColor:(0,_.hd)(e.op)})})))}function L(e){const{location:t,eventView:n,organization:s,handleOpChange:a,transactionName:o}=e,i=new A.MY("");i.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[o]);const l=n.clone();l.query=i.formatString();const c=(0,Z.ro)(t.query.spanOp);return(0,O.tZ)(I,{location:t,orgSlug:s.slug,eventView:l,cursor:"0:0:1",noPagination:!0,children:e=>(0,O.tZ)(m.Z,{isClearable:!0,maxMenuWidth:"24rem",menuTitle:(0,r.t)("Filter by operation"),options:q(e),onChange:e=>a(e?.value),value:c,triggerLabel:c??(0,r.t)("Filter"),triggerProps:{icon:(0,O.tZ)(C.wH,{})}})})}L.displayName="OpsFilter";const N=(0,l.Z)("div",{target:"e8oacth0"})("display:block;width:",(0,w.Z)(1),";height:",(0,w.Z)(1),";border-radius:100%;background-color:",(e=>e.backgroundColor),";");var V=n("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),z=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");const D={spanOp:(e,t)=>(0,T.Z)("performance_views.spans.change_op",{organization:e,operation_name:t}),sort:(e,t)=>(0,T.Z)("performance_views.spans.change_sort",{organization:e,sort_column:t})};function F(e){const{location:t,organization:n,eventView:r,projectId:s,transactionName:a}=e,o=(0,Z.ro)(t.query.query,"");function i(e){return function(r){D[e]?.(n,r);const s=(0,x.fK)({...t.query||{},[e]:r}),a=["cursor"];(0,b.ri)(r)||a.push(e);const o=d()(s,a);u.browserHistory.push({...t,query:o})}}const l=(0,Z.ro)(t.query.spanOp),p=(0,Z.ro)(t.query.spanGroup),f=(0,z.KK)(r),w=function(e,t){e=e.clone();const n=z.uQ[t];return e.fields=n?n.map((e=>({field:e}))):[],e}(r,f.field),T=(0,z.zW)(r),{projects:_}=(0,k.Z)();return(0,O.BX)(v.or,{fullWidth:!0,children:[(0,O.BX)(U,{children:[(0,O.tZ)(L,{location:t,eventView:r,organization:n,handleOpChange:i("spanOp"),transactionName:a}),(0,O.BX)(y.Z,{condensed:!0,children:[(0,O.tZ)(h.Z,{}),(0,O.tZ)(g.Z,{alignDropdown:"left",maxPickableDays:z.bc,relativeOptions:z.CS})]}),(0,O.tZ)(X,{organization:n,projectIds:r.project,query:o,fields:r.fields,onSearch:i("query")}),(0,O.tZ)(m.Z,{value:f.field,options:z.E5.map((e=>({value:e.field,label:e.label}))),onChange:e=>i("sort")(e.value),triggerProps:{prefix:f.prefix},triggerLabel:f.label})]}),(0,O.tZ)(j.Z,{eventView:T,orgSlug:n.slug,location:t,referrer:"api.performance.transaction-spans",cursor:"0:0:1",noPagination:!0,children:e=>{let{tableData:r}=e;const o=r?.data?.[0]??null;return(0,O.tZ)(E.Z,{location:t,orgSlug:n.slug,eventView:w,limit:10,perSuspect:0,spanOps:(0,b.ri)(l)?[l]:[],spanGroups:(0,b.ri)(p)?[p]:[],children:e=>{let{suspectSpans:r,isLoading:i,pageLinks:l}=e;return(0,O.BX)(c.Fragment,{children:[(0,O.tZ)(V.Z,{location:t,organization:n,transactionName:a,project:_.find((e=>e.id===s)),isLoading:i,suspectSpans:r??[],totals:o,sort:f.field}),(0,O.tZ)(S.Z,{pageLinks:l??null})]})}})}})]})}F.displayName="SpansContent";const U=(0,l.Z)("div",{target:"e13h24431"})("display:grid;gap:",(0,w.Z)(2),";margin-bottom:",(0,w.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr auto;}"),X=(0,l.Z)(f.Z,{target:"e13h24430"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),B=F;function R(e){const{location:t,organization:n,projects:r}=e;return(0,O.tZ)(o.ZP,{location:t,organization:n,projects:r,tab:i.Z.Spans,getDocumentTitle:$,generateEventView:z.xz,childComponent:B})}function $(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,r.t)("Performance")].join(" - "):[(0,r.t)("Summary"),(0,r.t)("Performance")].join(" - ")}R.displayName="TransactionSpans";const Q=(0,a.Z)((0,s.Z)(R))},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx":(e,t,n)=>{"use strict";function r(e){let{orgSlug:t,transaction:n,query:r,spanSlug:s,projectID:a}=e;const o=function(e){let{orgSlug:t,spanSlug:n}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(n.op)}:${n.group}/`}({orgSlug:t,spanSlug:s});return{pathname:o,query:{transaction:n,project:a,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query}}}let s;n.d(t,{BP:()=>r,wL:()=>s}),function(e){e.MIN="min",e.MAX="max"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n("./app/components/gridEditable/index.tsx"),s=n("./app/components/gridEditable/sortLink.tsx"),a=n("./app/components/links/link.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils.tsx"),l=n("./app/utils/discover/fieldRenderers.tsx"),c=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/discover/styles.tsx"),p=n("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),d=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){const{location:t,organization:n,transactionName:s,isLoading:a,suspectSpans:o,totals:l,sort:c,project:u}=e,p=o.map((e=>({operation:e.op,group:e.group,description:e.description,totalCount:e.count,frequency:(0,i.ri)(e.frequency)&&(0,i.ri)(l?.["count()"])?Math.min(1,e.frequency/l["count()"]):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,m.tZ)(r.ZP,{isLoading:a,data:p,columnOrder:v[c].map((e=>y[e])),columnSortBy:[],grid:{renderHeadCell:h,renderBodyCell:f(t,n,s,u)},location:t})}function h(e,t){const n=(0,c.qG)(e.key,x[e.key]);return(0,m.tZ)(s.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function f(e,t,n,r){return(s,i)=>{const c=(0,l.Js)(s.key,x);if("description"===s.key){const l=(0,p.BP)({orgSlug:t.slug,transaction:n,query:e.query,spanSlug:{op:i.operation,group:i.group},projectID:r?.id});return(0,m.tZ)(u.W2,{children:(0,m.tZ)(a.Z,{to:l,children:i[s.key]??(0,o.t)("(unnamed span)")})})}return c(i,{location:e,organization:t})}}g.displayName="SuspectSpansTable",h.displayName="renderHeadCell";const v={[d.g.COUNT]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.SUM_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P50_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p50ExclusiveTime","sumExclusiveTime"],[d.p.P75_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P95_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p95ExclusiveTime","sumExclusiveTime"],[d.p.P99_EXCLUSIVE_TIME]:["operation","description","totalCount","frequency","p99ExclusiveTime","sumExclusiveTime"]},y={operation:{key:"operation",name:(0,o.t)("Span Operation"),width:r.z7},description:{key:"description",name:(0,o.t)("Span Name"),width:r.z7},totalCount:{key:"totalCount",name:(0,o.t)("Span Count"),width:r.z7},frequency:{key:"frequency",name:(0,o.t)("Frequency"),width:r.z7},avgOccurrences:{key:"avgOccurrences",name:(0,o.t)("Average Occurrences"),width:r.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,o.t)("P50 Self Time"),width:r.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,o.t)("P75 Self Time"),width:r.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,o.t)("P95 Self Time"),width:r.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,o.t)("P99 Self Time"),width:r.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,o.t)("Total Self Time"),width:r.z7}},x={operation:"string",description:"string",totalCount:"integer",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"../node_modules/downsample/methods/ASAP.js":(e,t)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r={"PointValueExtractor<unknown>":e=>"function"==typeof e,XYDataPoint:e=>null!=e&&r.X(e.x)&&"number"==typeof e.y,X:e=>"number"==typeof e||e instanceof Date},s=e=>{for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length},a=(e,t)=>{for(var n=e.length,r=new Array(n),s=0;s<n;s++)r[s]=t(e[s],s);return r},o=e=>r["PointValueExtractor<unknown>"](e)?e:t=>t[e],i=(e,t)=>({x:e,y:t}),l=()=>({x:e=>{var t=r.XYDataPoint(e)?e.x:e[0];return t instanceof Date?t.getTime():t},y:e=>"y"in e?e.y:e[1],toPoint:i}),c=(e,t)=>new e.constructor(t),u=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],s=0,a=0;a<t;a++)s+=e[a];for(var o=t;o<=e.length;o++)(o-t)%n==0&&r.push(s/t),s+=e[o]-e[o-t];return r},p=e=>{var t=o(e.x),n=o(e.y),r=e.toPoint;return function(e,s){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===e.length)return e;for(var i,l=a(e,n),u=a(e,t),p=c(e,0),d=0,m=0;m<s;m++)d+=l[m];for(var g=s;g<=l.length;g++)(g-s)%o==0&&(i=r((u[g-s]+u[g-1])/2,d/s,g-s),p[p.length]=i),d+=l[g]-l[g-s];return p}};function d(e,t){if(e.length!=t.length)throw"Mismatched lengths";var n=e.length;0!=n&&(0==(n&n-1)?function(e,t){if(e.length!=t.length)throw"Mismatched lengths";var n=e.length;if(1!=n){for(var r=-1,s=0;s<32;s++)1<<s==n&&(r=s);if(-1==r)throw"Length is not a power of 2";for(var a=new Array(n/2),o=new Array(n/2),i=0;i<n/2;i++)a[i]=Math.cos(2*Math.PI*i/n),o[i]=Math.sin(2*Math.PI*i/n);for(var l=0;l<n;l++){var c=g(l,r);if(c>l){var u=e[l];e[l]=e[c],e[c]=u,u=t[l],t[l]=t[c],t[c]=u}}for(var p=2;p<=n;p*=2)for(var d=p/2,m=n/p,h=0;h<n;h+=p)for(var f=h,v=0;f<h+d;f++,v+=m){var y=e[f+d]*a[v]+t[f+d]*o[v],x=-e[f+d]*o[v]+t[f+d]*a[v];e[f+d]=e[f]-y,t[f+d]=t[f]-x,e[f]+=y,t[f]+=x}}}(e,t):function(e,t){if(e.length!=t.length)throw"Mismatched lengths";for(var n=e.length,r=1;r<2*n+1;)r*=2;for(var s=new Array(n),a=new Array(n),o=0;o<n;o++){var i=o*o%(2*n);s[o]=Math.cos(Math.PI*i/n),a[o]=Math.sin(Math.PI*i/n)}for(var l=new Array(r),c=new Array(r),u=0;u<n;u++)l[u]=e[u]*s[u]+t[u]*a[u],c[u]=-e[u]*a[u]+t[u]*s[u];for(var p=n;p<r;p++)l[p]=c[p]=0;var g=new Array(r),h=new Array(r);g[0]=s[0],h[0]=a[0];for(var f=1;f<n;f++)g[f]=g[r-f]=s[f],h[f]=h[r-f]=a[f];for(var v=n;v<=r-n;v++)g[v]=h[v]=0;var y=new Array(r),x=new Array(r);!function(e,t,n,r,s,a){if(e.length!=t.length||e.length!=n.length||n.length!=r.length||e.length!=s.length||s.length!=a.length)throw"Mismatched lengths";var o=e.length;e=e.slice(),t=t.slice(),n=n.slice(),r=r.slice(),d(e,t),d(n,r);for(var i=0;i<o;i++){var l=e[i]*n[i]-t[i]*r[i];t[i]=t[i]*n[i]+e[i]*r[i],e[i]=l}m(e,t);for(var c=0;c<o;c++)s[c]=e[c]/o,a[c]=t[c]/o}(l,c,g,h,y,x);for(var S=0;S<n;S++)e[S]=y[S]*s[S]+x[S]*a[S],t[S]=-y[S]*a[S]+x[S]*s[S]}(e,t))}function m(e,t){d(t,e)}function g(e,t){for(var n=0,r=0;r<t;r++)n=n<<1|1&e,e>>>=1;return n}p(l());var h,f,v,y=e=>(e=>{for(var t=s(e),n=0,r=0;r<e.length;r+=1)n+=(e[r]-t)*(e[r]-t);return Math.sqrt(n/e.length)})((e=>{var t=e.length-1;if(t<1)return[];for(var n=new Array(t),r=0;r<t;r++)n[r]=e[r+1]-e[r];return n})(e)),x=e=>{for(var t,n,r=e.length,a=s(e),o=0,i=0,l=0;l<r;l++)o+=(n=(t=e[l]-a)*t)*n,i+=n;return r*o/(i*i)},S=(h=l(),f=o(h.y),v=p(h),function e(t,r){if(0===t.length)return t;if(r<=0)throw new Error("Supplied non-positive resolution parameter to ASAP: ".concat(r));if(t.length>=2*r){var o=Math.trunc(t.length/r);return e(v(t,o,o),r)}for(var i=a(t,f),l=((e,t)=>{for(var r=e.length,a=s(e),o=Math.pow(2,Math.trunc(Math.log2(r))+1),i=new Array(o).fill(0),l=new Array(o).fill(0),c=0;c<r;c+=1)i[c]=e[c]-a;d(i,l);for(var u=0;u<i.length;u+=1)i[u]=Math.pow(i[u],2)+Math.pow(l[u],2),l[u]=0;m(i,l);for(var p=[],g=1;g<t;g++)p[g]=i[g]/i[0];var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=e.length;if(n<=1)return[[],0];var r=0,s=[];if(e.length>1)for(var a=e[1]>e[0],o=1,i=2;i<e.length;i+=1)!a&&e[i]>e[i-1]?(o=i,a=!a):a&&e[i]>e[o]?o=i:a&&e[i]<e[i-1]&&(o>1&&e[o]>t&&(s.push(o),e[o]>r&&(r=e[o])),a=!a);if(s.length<=1)for(var l=2;l<n;l+=1)s.push(l);return[s,r]}(p),f=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,s=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(s)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(h,2);return{correlations:p,peaks:f[0],maxCorrelation:f[1]}})(i,Math.round(i.length/10)),c=l.correlations,p=l.peaks,g=l.maxCorrelation,h=x(i),S=y(i),w=1,b=1,T=-1,j=i.length/10,E=p.length-1;E>=0;E-=1){var Z=p[E];if(Z<b||1===Z)break;if(!(Math.sqrt(1-c[Z])*w>Math.sqrt(1-c[w])*Z)){var k=u(i,Z,1),_=x(k),C=y(k);_>=h&&(C<S&&(S=C,w=Z),b=Math.round(Math.max(Z*Math.sqrt((g-1)/(c[Z]-1)),b)),T<0&&(T=E))}}return T>0&&(T<p.length-2&&(j=p[T+1]),b=Math.max(b,p[T]+1)),w=((e,t,n,r,s,a)=>{for(;e<=t;){var o=Math.round((e+t)/2),i=u(n,o,1);if(x(i)>=s){var l=y(i);l<r&&(a=o,r=l),e=o+1}else t=o-1}return a})(b,j,i,S,h,w),v(t,w,1)});t.Cl=S},"../node_modules/lodash/assign.js":(e,t,n)=>{var r=n("../node_modules/lodash/_assignValue.js"),s=n("../node_modules/lodash/_copyObject.js"),a=n("../node_modules/lodash/_createAssigner.js"),o=n("../node_modules/lodash/isArrayLike.js"),i=n("../node_modules/lodash/_isPrototype.js"),l=n("../node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,u=a((function(e,t){if(i(t)||o(t))s(t,l(t),e);else for(var n in t)c.call(t,n)&&r(e,n,t[n])}));e.exports=u}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionSpans_index_tsx-node_modules_downsample_m-9302a4.edca46f66aa93124b9145f9441b61df9.js.map