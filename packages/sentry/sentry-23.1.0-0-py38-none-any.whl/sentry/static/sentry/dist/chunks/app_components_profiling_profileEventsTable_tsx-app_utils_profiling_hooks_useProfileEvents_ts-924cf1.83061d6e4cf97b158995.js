"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_profiling_profileEventsTable_tsx-app_utils_profiling_hooks_useProfileEvents_ts-924cf1"],{"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>g});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react-router/es/index.js"),i=n("../node_modules/lodash/omit.js"),s=n.n(i),a=n("./app/components/links/link.tsx"),c=n("./app/icons/index.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{align:t,title:n,canSort:r,generateSortLink:i,onClick:s,direction:a,replace:c}=e;const u=i();if(!u||!r)return(0,l.tZ)(p,{align:t,children:n});const g=a?(0,l.tZ)(m,{size:"xs",direction:"desc"===a?"down":"up"}):null;return(0,l.BX)(d,{align:t,to:u,onClick:e=>{c&&(e.preventDefault(),o.browserHistory.replace(u)),s?.(e)},children:[n," ",g]})}u.displayName="SortLink";const d=(0,r.Z)((e=>{const t=s()(e,["align","css"]);return(0,l.tZ)(a.Z,{...t})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,r.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),m=(0,r.Z)(c.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),g=u},"./app/components/performanceDuration.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});var r=n("./app/components/duration.tsx"),o=n("./app/utils.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){const t=function(e){return(0,o.ri)(e.nanoseconds)}(e)?e.nanoseconds/1e9:function(e){return(0,o.ri)(e.milliseconds)}(e)?e.milliseconds/1e3:e.seconds;return(0,i.tZ)(r.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}s.displayName="PerformanceDuration";const a=s},"./app/components/profiling/profileEventsTable.tsx":(e,t,n)=>{n.d(t,{Q:()=>Z}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react/index.js"),o=n("./app/components/count.tsx"),i=n("./app/components/dateTime.tsx"),s=n("./app/components/gridEditable/index.tsx"),a=n("./app/components/idBadge/projectBadge.tsx"),c=n("./app/components/links/link.tsx"),l=n("./app/components/performanceDuration.tsx"),u=n("./app/components/version.tsx"),d=n("./app/locale.tsx"),p=n("./app/utils.tsx"),m=n("./app/utils/discover/fieldRenderers.tsx"),g=n("./app/utils/discover/styles.tsx"),f=n("./app/utils/events.tsx"),y=n("./app/utils/profiling/routes.tsx"),h=n("./app/utils/profiling/tableRenderer.tsx"),v=n("./app/utils/useLocation.tsx"),k=n("./app/utils/useOrganization.tsx"),x=n("./app/utils/useProjects.tsx"),j=n("./app/views/eventsV2/table/quickContext/quickContextWrapper.tsx"),w=n("./app/views/eventsV2/table/quickContext/utils.tsx"),b=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){const t=(0,v.T)(),n=(0,k.Z)(),{projects:o}=(0,x.Z)(),i=(0,r.useCallback)((n=>()=>{let r="desc";return n===e.sort.key&&e.sort.order===r&&(r="asc"),{...t,query:{...t.query,sort:"asc"===r?n:`-${n}`}}}),[t,e.sort]);return(0,b.tZ)(s.ZP,{isLoading:e.isLoading,error:e.error,data:e.data?.data??[],columnOrder:e.columns.map((e=>function(e){return q[e]?q[e]:{key:e,name:e,width:s.z7}}(e))),columnSortBy:[e.sort],grid:{renderHeadCell:(0,h.w)({currentSort:e.sort,generateSortLink:i,rightAlignedColumns:(l=e.columns,new Set(l.filter((e=>_.has(e))))),sortableColumns:e.sortableColumns}),renderBodyCell:(a=e.data?.meta??{fields:{},units:{}},c={location:t,organization:n,projects:o},function(e,t,n,r){return(0,b.tZ)(z,{meta:a,baggage:c,column:e,dataRow:t,rowIndex:n,columnIndex:r})})},location:t});var a,c,l}function z(e){const t=e.column.key,n=e.dataRow[t],r=e.meta.fields[t],s=e.meta.units[t];if("id"===t){const t=S(e.baggage,e.dataRow);if(!(0,p.ri)(t))return(0,b.tZ)(g.W2,{children:(0,f.XQ)(n)});const r=(0,y.O$)({orgSlug:e.baggage.organization.slug,projectSlug:t.slug,profileId:n});return(0,b.tZ)(g.W2,{children:(0,b.tZ)(c.Z,{to:r,children:(0,f.XQ)(n)})})}if("project.id"===t||"project"===t||"project.name"===t){const t=S(e.baggage,e.dataRow);return(0,p.ri)(t)?(0,b.tZ)(g.W2,{children:(0,b.tZ)(a.Z,{project:t,avatarSize:16})}):(0,b.tZ)(g.W2,{children:(0,d.t)("n/a")})}if("transaction"===t){const t=S(e.baggage,e.dataRow);if((0,p.ri)(t))return(0,b.tZ)(g.W2,{children:(0,b.tZ)(c.Z,{to:(0,y.R0)({query:e.baggage.location.query,orgSlug:e.baggage.organization.slug,projectSlug:t.slug,transaction:n}),children:n})})}if("release"===t&&n)return e.baggage.organization.features.includes("discover-quick-context")?(0,b.tZ)(j.V,{dataRow:e.dataRow,contextType:w.z.RELEASE,organization:e.baggage.organization,children:(0,b.tZ)(u.Z,{version:n,truncate:!0})}):(0,b.tZ)(g.cz,{children:(0,b.tZ)(u.Z,{version:n,anchor:!1,tooltipRawVersion:!0,truncate:!0})});switch(r){case"integer":case"number":return(0,b.tZ)(g.Hw,{children:(0,b.tZ)(o.Z,{value:n})});case"duration":const e=s?m.a_[s]??1:1;return(0,b.tZ)(g.Hw,{children:(0,b.tZ)(l.Z,{milliseconds:n*e,abbreviation:!0})});case"date":return(0,b.tZ)(g.W2,{children:(0,b.tZ)(i.Z,{date:n,year:!0,seconds:!0,timeZone:!0})});default:return(0,b.tZ)(g.W2,{children:n})}}function S(e,t){let n;if((0,p.ri)(t["project.id"])){const r=t["project.id"].toString();n=e.projects.find((e=>e.id===r))}else if((0,p.ri)(t.project)){const r=t.project;n=e.projects.find((e=>e.slug===r))}else if((0,p.ri)(t["project.name"])){const r=t["project.name"];n=e.projects.find((e=>e.slug===r))}return n??null}Z.displayName="ProfileEventsTable";const _=new Set(["profile.duration","p75()","p95()","p99()","count()"]),q={id:{key:"id",name:(0,d.t)("Profile ID"),width:s.z7},trace:{key:"trace",name:(0,d.t)("Trace ID"),width:s.z7},"trace.transaction":{key:"trace.transaction",name:(0,d.t)("Transaction ID"),width:s.z7},transaction:{key:"transaction",name:(0,d.t)("Transaction"),width:s.z7},"profile.duration":{key:"profile.duration",name:(0,d.t)("Duration"),width:s.z7},project:{key:"project",name:(0,d.t)("Project"),width:s.z7},"project.id":{key:"project.id",name:(0,d.t)("Project"),width:s.z7},"project.name":{key:"project.name",name:(0,d.t)("Project"),width:s.z7},environment:{key:"environment",name:(0,d.t)("Environment"),width:s.z7},timestamp:{key:"timestamp",name:(0,d.t)("Timestamp"),width:s.z7},release:{key:"release",name:(0,d.t)("Release"),width:s.z7},"platform.name":{key:"platform.name",name:(0,d.t)("Platform"),width:s.z7},"device.arch":{key:"device.arch",name:(0,d.t)("Device Architecture"),width:s.z7},"device.classification":{key:"device.classification",name:(0,d.t)("Device Classification"),width:s.z7},"device.locale":{key:"device.locale",name:(0,d.t)("Device Locale"),width:s.z7},"device.manufacturer":{key:"device.manufacturer",name:(0,d.t)("Device Manufacturer"),width:s.z7},"device.model":{key:"device.model",name:(0,d.t)("Device Model"),width:s.z7},"os.build":{key:"os.build",name:(0,d.t)("OS Build"),width:s.z7},"os.name":{key:"os.name",name:(0,d.t)("OS Name"),width:s.z7},"os.version":{key:"os.version",name:(0,d.t)("OS Version"),width:s.z7},"last_seen()":{key:"last_seen()",name:(0,d.t)("Last Seen"),width:s.z7},"p75()":{key:"p75()",name:(0,d.t)("P75"),width:s.z7},"p95()":{key:"p95()",name:(0,d.t)("P95()"),width:s.z7},"p99()":{key:"p99()",name:(0,d.t)("P99()"),width:s.z7},"count()":{key:"count()",name:(0,d.t)("Count()"),width:s.z7}}},"./app/utils/profiling/hooks/useProfileEvents.tsx":(e,t,n)=>{n.d(t,{GP:()=>u,Z:()=>d,kq:()=>p}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/@tanstack/react-query/build/umd/index.production.js"),o=n("./app/components/organizations/pageFilters/parse.tsx"),i=n("./app/locale.tsx"),s=n("./app/utils.tsx"),a=n("./app/utils/useApi.tsx"),c=n("./app/utils/useOrganization.tsx"),l=n("./app/utils/usePageFilters.tsx");function u(e){let{fields:t,limit:n,referrer:i,query:s,sort:u,cursor:d,enabled:p=!0,datetime:m}=e;const g=(0,a.Z)(),f=(0,c.Z)(),{selection:y}=(0,l.Z)(),h=`/organizations/${f.slug}/events/`,v={query:{dataset:"profiles",referrer:i,project:y.projects,environment:y.environments,...(0,o.fK)(m??y.datetime),field:t,per_page:n,query:s,sort:"asc"===u.order?u.key:`-${u.key}`,cursor:d}},k=[h,v];return(0,r.useQuery)({queryKey:k,queryFn:()=>g.requestPromise(h,{method:"GET",includeAllArgs:!0,query:v.query}),refetchOnWindowFocus:!1,retry:!1,enabled:p})}function d(e){if(!(0,s.ri)(e))return null;const t=e.responseJSON?.detail;if("string"==typeof t)return t;const n=t?.message;return"string"==typeof n?n:(0,i.t)("An unknown error occurred.")}function p(e,t,n){const r="-"===(e=e||"")[0]?"desc":"asc",o="asc"===r?e:e.substring(1);return t.includes(o)?{key:o,order:r}:n}},"./app/utils/profiling/hooks/useProfileFilters.tsx":(e,t,n)=>{n.d(t,{J:()=>a});var r=n("../node_modules/react/index.js"),o=n("./app/components/organizations/pageFilters/parse.tsx"),i=n("./app/utils/useApi.tsx"),s=n("./app/utils/useOrganization.tsx");function a(e){let{query:t,selection:n}=e;const a=(0,i.Z)(),l=(0,s.Z)(),[u,d]=(0,r.useState)({});return(0,r.useEffect)((()=>{if(n)return function(e,t,n,r){return e.requestPromise(`/organizations/${t.slug}/profiling/filters/`,{method:"GET",query:{query:n,project:r.projects,environment:r.environments,...(0,o.fK)(r.datetime)}})}(a,l,t,n).then((e=>{const t=e.reduce(((e,t)=>(c[t.key]&&(t.key=c[t.key],e[t.key]={...t,predefined:!0}),e)),{});d(t)})),()=>a.clear()}),[a,l,t,n]),u}const c={version:"release",device_locale:"device.locale",platform:"platform.name",transaction_name:"transaction",device_os_build_number:"os.build",device_os_name:"os.name",device_os_version:"os.version",device_model:"device.model",device_manufacturer:"device.manufacturer",device_classification:"device.classification"}},"./app/utils/profiling/routes.tsx":(e,t,n)=>{function r(e){let{orgSlug:t,projectSlug:n,profileId:r}=e;return`/organizations/${t}/profiling/profile/${n}/${r}/flamechart/`}function o(e){let{orgSlug:t,query:n}=e;const r=function(e){let{orgSlug:t}=e;return`/organizations/${t}/profiling/`}({orgSlug:t});return{pathname:r,query:{...n}}}function i(e){let{orgSlug:t,projectSlug:n,transaction:r,query:o}=e;const i=function(e){let{orgSlug:t,projectSlug:n}=e;return`/organizations/${t}/profiling/summary/${n}/`}({orgSlug:t,projectSlug:n});return{pathname:i,query:{...o,transaction:r}}}function s(e){let{orgSlug:t,projectSlug:n,profileId:o,query:i}=e;return{pathname:r({orgSlug:t,projectSlug:n,profileId:o}),query:{...i}}}function a(e){let{orgSlug:t,projectSlug:n,profileId:r,query:o}=e;const i=function(e){let{orgSlug:t,projectSlug:n,profileId:r}=e;return`/organizations/${t}/profiling/profile/${n}/${r}/details/`}({orgSlug:t,projectSlug:n,profileId:r});return{pathname:i,query:{...o}}}n.d(t,{O$:()=>r,Qy:()=>a,R0:()=>i,TH:()=>s,XR:()=>o})},"./app/utils/profiling/tableRenderer.tsx":(e,t,n)=>{n.d(t,{w:()=>i});var r=n("./app/components/gridEditable/sortLink.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{currentSort:t,generateSortLink:n,rightAlignedColumns:i,sortableColumns:s,onClick:a}=e;return(e,c)=>(0,o.tZ)(r.Z,{onClick:t=>a?.(e,t),align:i?.has(e.key)?"right":"left",title:e.name,direction:t?.key===e.key?t?.order:void 0,canSort:s?.has(e.key)||!1,generateSortLink:n?.(e.key)??(()=>{}),replace:!0})}}}]);
//# sourceMappingURL=../sourcemaps/app_components_profiling_profileEventsTable_tsx-app_utils_profiling_hooks_useProfileEvents_ts-924cf1.c5f8b0a059056464d7851578f415555f.js.map