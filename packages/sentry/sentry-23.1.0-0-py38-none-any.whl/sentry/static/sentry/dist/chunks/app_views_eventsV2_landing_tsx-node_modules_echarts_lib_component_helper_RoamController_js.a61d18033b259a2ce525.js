(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_eventsV2_landing_tsx-node_modules_echarts_lib_component_helper_RoamController_js"],{"./app/actionCreators/events.tsx":(e,t,r)=>{"use strict";r.d(t,{JE:()=>u,eV:()=>d,lI:()=>l});var s=r("../node_modules/lodash/pick.js"),a=r.n(s),o=r("./app/components/charts/utils.tsx"),n=r("./app/utils/getPeriod.tsx"),i=r("./app/utils/performance/constants.tsx");const l=(e,t)=>{let{organization:r,project:s,environment:a,team:i,period:l,start:d,end:u,interval:c,comparisonDelta:p,includePrevious:m,query:h,yAxis:g,field:v,topEvents:y,orderby:f,partial:x,withoutZerofill:b,referrer:Z,queryBatching:w,generatePathname:D,queryExtras:_,excludeOther:C,includeAllArgs:j}=t;const z=D?.(r)??`/organizations/${r.slug}/events-stats/`,P=(0,o.Sw)(m,l),k={includeAllArgs:j,query:{...Object.fromEntries(Object.entries({interval:c,comparisonDelta:p,project:s,environment:a,team:i,query:h,yAxis:g,field:v,topEvents:y,orderby:f,partial:x?"1":void 0,withoutZerofill:b?"1":void 0,referrer:Z||"api.organization-event-stats",excludeOther:C?"1":void 0}).filter((e=>{let[,t]=e;return void 0!==t}))),...(0,n.X)({period:l,start:d,end:u},{shouldDoublePeriod:P}),..._}};return w?.batchRequest?w.batchRequest(e,z,k):e.requestPromise(z,k)};function d(e,t,r){const s={...a()(r,Object.values(i.s)),query:r.query};return e.requestPromise(`/organizations/${t}/events-facets/`,{query:s})}function u(e,t,r){const s={...a()(r,Object.values(i.s)),query:r.query};return e.requestPromise(`/organizations/${t}/events-meta/`,{query:s}).then((e=>e.count))}},"./app/components/activity/item/avatar.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("./app/components/avatar/userAvatar.tsx"),o=r("./app/components/placeholder.tsx"),n=r("./app/icons/index.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{className:t,type:r,user:s,size:n=38}=e;return s?(0,i.tZ)(a.Z,{user:s,size:n,className:t}):"system"===r?(0,i.tZ)(u,{className:t,size:n,children:(0,i.tZ)(c,{size:"md"})}):(0,i.tZ)(o.Z,{className:t,width:`${n}px`,height:`${n}px`,shape:"circle"})}l.displayName="ActivityAvatar";const d=l,u=(0,s.Z)("span",{target:"ef4o3hd1"})("display:flex;justify-content:center;align-items:center;width:",(e=>e.size),"px;height:",(e=>e.size),"px;background-color:",(e=>e.theme.textColor),";color:",(e=>e.theme.background),";border-radius:50%;"),c=(0,s.Z)(n.iW,{target:"ef4o3hd0"})({name:"1p2ly5v",styles:"padding-bottom:3px"})},"./app/components/charts/areaChart.tsx":(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var s=r("./app/components/charts/series/lineSeries.tsx"),a=r("./app/components/charts/baseChart.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{series:t,stacked:r,colors:n,...i}=e;return(0,o.tZ)(a.Z,{...i,"data-test-id":"area-chart",colors:n,series:t.map(((e,t)=>{let{seriesName:a,data:o,...i}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.Z)({...e})}({stack:r?"area":void 0,name:a,data:o.map((e=>{let{name:t,value:r}=e;return[t,r]})),lineStyle:{color:n?.[t],opacity:1,width:.4},areaStyle:{color:n?.[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...i})}))})}n.displayName="AreaChart"},"./app/components/charts/components/visualMap.tsx":(e,t,r)=>{"use strict";function s(e){return e}r.d(t,{Z:()=>s}),r("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/eventsGeoRequest.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var s=r("../node_modules/react/index.js"),a=r("./app/utils/dates.tsx"),o=r("./app/utils/discover/eventView.tsx"),n=r("./app/utils/discover/genericDiscoverQuery.tsx"),i=r("./app/utils/toArray.tsx"),l=r("./app/utils/usePrevious.tsx");const d=e=>{let{api:t,organization:r,yAxis:d,query:u,orderby:c,projects:p,period:m,start:h,end:g,environments:v,referrer:y,children:f}=e;const x=(0,s.useMemo)((()=>o.ZP.fromSavedQuery({id:void 0,name:"",version:2,fields:(0,i.Z)(d),query:u,orderby:c??"",projects:p,range:m??"",start:h?(0,a.v5)(h):void 0,end:g?(0,a.v5)(g):void 0,environment:v})),[d,u,c,p,m,h,g,v]),[b,Z]=(0,s.useState)(void 0),[w,D]=(0,s.useState)(!1),[_,C]=(0,s.useState)(!1),j=(0,l.Z)(t),z=(0,l.Z)(x),P=(0,l.Z)(r.slug),k=(0,l.Z)(y);return(0,s.useEffect)((()=>{let e=!0;return C(!1),j===t&&z===x&&P===r.slug&&k===y||D(!0),(0,n.AA)(t,`/organizations/${r.slug}/events-geo/`,{...x.generateQueryStringObject(),referrer:y}).then((t=>{e&&(Z([t[0]]),D(!1))})).catch((()=>{e&&(C(!0),D(!1))})),()=>{e=!1}}),[t,x,r.slug,y,j,z,P,k]),f({errored:_,loading:!b&&!_,reloading:w,tableData:b})}},"./app/components/charts/eventsRequest.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/react/index.js")),o=r("../node_modules/lodash/isEqual.js"),n=r.n(o),i=r("../node_modules/lodash/omitBy.js"),l=r.n(i),d=r("./app/actionCreators/events.tsx"),u=r("./app/actionCreators/indicator.tsx"),c=r("./app/components/charts/loadingPanel.tsx"),p=r("./app/components/charts/utils.tsx"),m=r("./app/locale.tsx"),h=r("./app/utils.tsx"),g=r("./app/utils/discover/fieldRenderers.tsx"),v=r("./app/utils/discover/fields.tsx"),y=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f=["api","children","organization","loading","queryBatching","generatePathname"],x=e=>l()(e,((e,t)=>f.includes(t)));class b extends a.PureComponent{constructor(){var e;super(...arguments),e=this,(0,s.Z)(this,"state",{reloading:!!this.props.loading,errored:!1,timeseriesData:null,fetchedWithPrevious:!1}),(0,s.Z)(this,"unmounting",!1),(0,s.Z)(this,"fetchData",(async()=>{const{api:e,confirmedQuery:t,onError:r,expired:s,name:a,hideError:o,...n}=this.props;let i,l=null;if(!1!==t){if(this.setState((e=>({reloading:null!==e.timeseriesData,errored:!1,errorMessage:void 0}))),s)i=(0,m.t)("%s has an invalid date range. Please try a more recent date range.",a),(0,u.Iw)(i,{append:!0}),this.setState({errored:!0,errorMessage:i});else try{e.clear(),l=await(0,d.lI)(e,n)}catch(e){i=e&&e.responseJSON&&e.responseJSON.detail?e.responseJSON.detail:(0,m.t)("Error loading chart data"),o||(0,u.Iw)(i),r&&r(i),this.setState({errored:!0,errorMessage:i})}this.unmounting||(this.setState({reloading:!1,timeseriesData:l,fetchedWithPrevious:n.includePrevious}),n.dataLoadedCallback&&n.dataLoadedCallback(l))}})),(0,s.Z)(this,"getData",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{fetchedWithPrevious:r}=e.state,{period:s,includePrevious:a}=e.props,o=r||(0,p.Sw)(a,s),n=Math.floor(t.length/2);return{current:o?t.slice(n):t,previous:o?t.slice(0,n):null}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){n()(x(e),x(this.props))||this.fetchData()}componentWillUnmount(){this.unmounting=!0}calculateTotalsPerTimestamp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>1e3*e;return e.map(((e,r)=>{let[s,a]=e;return{name:t(s,a,r),value:a.reduce(((e,t)=>{let{count:r}=t;return e+r}),0)}}))}transformPreviousPeriodData(e,t,r){return t?{seriesName:r??"Previous",data:this.calculateTotalsPerTimestamp(t,((t,r,s)=>1e3*e[s][0])),stack:"previous"}:null}transformAggregatedTimeseries(e){return{seriesName:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",data:this.calculateTotalsPerTimestamp(e)}}transformTimeseriesData(e,t,r){let s=1;if(r){const e=t?.units?.[(0,v.LY)(r)];s=(e&&(g.a_[e]??g.en[e]))??1}return[{seriesName:r||"Current",data:e.map((e=>{let[t,r]=e;return{name:1e3*t,value:r.reduce(((e,t)=>{let{count:r}=t;return e+r}),0)*s}}))}]}transformComparisonTimeseriesData(e){return[{seriesName:"comparisonCount()",data:e.map((e=>{let[t,r]=e;return{name:1e3*t,value:r.reduce(((e,t)=>{let{comparisonCount:r}=t;return e+(r??0)}),0)}}))}]}processData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;const{data:s,isMetricsData:a,totals:o,meta:n}=e,{includeTransformedData:i,includeTimeAggregation:l,timeAggregationSeriesName:d,currentSeriesNames:u,previousSeriesNames:c,comparisonDelta:m}=this.props,{current:h,previous:g}=this.getData(s);return{data:i?this.transformTimeseriesData(h,n,r??u?.[t]):[],comparisonData:i&&m?this.transformComparisonTimeseriesData(h):[],allData:s,originalData:h,totals:o,isMetricsData:a,originalPreviousData:g,previousData:i?this.transformPreviousPeriodData(h,g,(r?(0,p.TE)(r):void 0)??c?.[t]):null,timeAggregatedData:l?this.transformAggregatedTimeseries(h,d||""):{},timeframe:e.start&&e.end?g?{start:500*(e.start+e.end),end:1e3*e.end}:{start:1e3*e.start,end:1e3*e.end}:void 0}}render(){const{children:e,showLoading:t,...r}=this.props,{topEvents:s,yAxis:a}=this.props,{timeseriesData:o,reloading:n,errored:i,errorMessage:l}=this.state,d=this.props.loading||null===o;if(t&&d)return(0,y.tZ)(c.Z,{"data-test-id":"events-request-loading"});if((0,p.Xe)(o,(0,h.ri)(s))){let t;const s={},a=Object.keys(o).map(((e,r)=>{const a=o[e],n=this.processData(a,r,(0,v.bQ)(e));return t||(t=n.timeframe),n.isMetricsData&&(s[e]={isMetricsData:n.isMetricsData}),[a.order||0,n.data[0],n.previousData,{isMetricsData:n.isMetricsData}]})).sort(((e,t)=>e[0]-t[0])),u={};Object.keys(o).forEach((e=>{const t=o[e].meta?.fields[(0,v.LY)(e)];t&&(u[e]=t)}));const c=a.map((e=>e[1])),p=a.some((e=>null===e[2]))?void 0:a.map((e=>e[2]));return e({loading:d,reloading:n,errored:i,errorMessage:l,results:c,timeframe:t,previousTimeseriesData:p,seriesAdditionalInfo:s,timeseriesResultsTypes:u,...r})}if(o){const t=a&&("string"==typeof a?a:a[0]),s=t&&o.meta?.fields[(0,v.LY)(t)],u=s?{[t]:s}:void 0,{data:c,comparisonData:p,allData:m,originalData:h,totals:g,originalPreviousData:y,previousData:f,timeAggregatedData:x,timeframe:b,isMetricsData:Z}=this.processData(o);return e({loading:d,reloading:n,errored:i,errorMessage:l,seriesAdditionalInfo:{[this.props.currentSeriesNames?.[0]??"current"]:{isMetricsData:Z}},timeseriesData:c,comparisonTimeseriesData:p,allTimeseriesData:m,originalTimeseriesData:h,timeseriesTotals:g,originalPreviousTimeseriesData:y,previousTimeseriesData:f?[f]:f,timeAggregatedData:x,timeframe:b,timeseriesResultsTypes:u,...r})}return e({loading:d,reloading:n,errored:i,errorMessage:l,...r})}}b.displayName="EventsRequest",(0,s.Z)(b,"defaultProps",{period:void 0,start:null,end:null,interval:"1d",comparisonDelta:void 0,limit:15,query:"",includePrevious:!0,includeTransformedData:!0});const Z=b},"./app/components/charts/lineChart.tsx":(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var s=r("./app/components/charts/series/lineSeries.tsx"),a=r("./app/components/charts/baseChart.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{series:t,seriesOptions:r,...n}=e;return(0,o.tZ)(a.Z,{...n,series:t.map((e=>{let{seriesName:t,data:a,dataArray:o,...n}=e;return(0,s.Z)({...r,...n,name:t,data:o||a?.map((e=>{let{value:t,name:r}=e;return[r,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}n.displayName="LineChart"},"./app/components/charts/loadingPanel.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("./app/components/loadingMask.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,s.Z)((e=>{let{height:t,...r}=e;return(0,o.tZ)("div",{...r,children:(0,o.tZ)(a.Z,{})})}),{target:"e16jayu70"})("flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height),";position:relative;border-color:transparent;margin-bottom:0;");n.defaultProps={height:"200px"};const i=n},"./app/components/charts/worldMapChart.tsx":(e,t,r)=>{"use strict";r.d(t,{y:()=>c});var s=r("../node_modules/react/index.js"),a=r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),o=r("../node_modules/echarts/lib/core/echarts.js"),n=r("../node_modules/lodash/max.js"),i=r.n(n),l=r("./app/components/charts/components/visualMap.tsx");r("../node_modules/echarts/lib/chart/map.js");var d=r("./app/components/charts/baseChart.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{series:t,seriesOptions:n,fromDiscover:c,fromDiscoverQueryList:p,...m}=e;const h=(0,a.u)(),[g,v]=(0,s.useState)((()=>({countryToCodeMap:null,map:null,codeToCountryMap:null})));if((0,s.useEffect)((()=>{let e=!1;return e||async function(){try{const[e,t]=await Promise.all([r.e("app_data_countryCodesMap_tsx").then(r.bind(r,"./app/data/countryCodesMap.tsx")),r.e("app_data_world_json").then(r.t.bind(r,"./app/data/world.json",19))]),s=e.default,a=t.default;o.je?.("sentryWorld",a);const n={};for(const e in a)n[s[e]]=e;v({countryToCodeMap:s,map:a,codeToCountryMap:n})}catch{}}(),()=>{e=!0}}),[]),null===g.countryToCodeMap||null===g.map)return null;const y=t.map((e=>{let{seriesName:t,data:r,...s}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{map:""};return{roam:!0,...e,emphasis:{label:{show:!1},...e.emphasis},type:"map"}}({...n,...s,map:"sentryWorld",name:t,nameMap:g.countryToCodeMap??void 0,aspectScale:.85,zoom:c?1.1:p?.9:1.3,center:[10.97,p?-12:9.71],itemStyle:{areaColor:h.gray200,borderColor:h.backgroundSecondary},emphasis:{itemStyle:{areaColor:h.pink300},label:{show:!1}},data:r,silent:p,roam:!p})})),f=i()(t.map((e=>{let{data:t}=e;return i()(t.map((e=>{let{value:t}=e;return t})))})))||1;return(0,u.tZ)(d.Z,{options:{backgroundColor:p?void 0:h.background,visualMap:[(0,l.Z)({show:!p,left:c?void 0:"right",right:c?5:void 0,min:0,max:f,inRange:{color:[h.purple200,h.purple300]},text:["High","Low"],textStyle:{color:h.textColor},calculable:!1})]},...m,yAxis:null,xAxis:null,series:y,tooltip:{formatter:e=>{const{marker:t,name:r,value:s}=Array.isArray(e)?e[0]:e;if(isNaN(s))return"";const a="number"==typeof s?s.toLocaleString():"";return[`<div class="tooltip-series tooltip-series-solo">\n               <div><span class="tooltip-label">${t} <strong>${g.codeToCountryMap?.[r]||r}</strong></span> ${a}</div>\n            </div>`,'<div class="tooltip-arrow"></div>'].join("")}},height:c?400:void 0})}c.displayName="WorldMapChart"},"./app/components/loadingMask.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s=(0,r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e9w1nku0"})("background-color:",(e=>e.theme.backgroundSecondary),";border-radius:",(e=>e.theme.borderRadius),";position:absolute;top:0;bottom:0;left:0;right:0;")},"./app/components/searchBar.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>v,p:()=>g});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=r("../node_modules/react/index.js"),o=r("./app/components/button.tsx"),n=r("./app/components/inputGroup.tsx"),i=r("./app/icons/index.tsx"),l=r("./app/icons/iconClose.tsx"),d=r("./app/locale.tsx"),u=r("./app/styles/space.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{query:t,defaultQuery:r="",onChange:s,onSearch:o,width:u,size:p,className:v,trailing:y,...f}=e;const x=(0,a.useRef)(null),[b,Z]=(0,a.useState)(t??r);(0,a.useEffect)((()=>{"string"==typeof t&&Z(t)}),[t]);const w=(0,a.useCallback)((e=>{const{value:t}=e.target;Z(t),s?.(t)}),[s]),D=(0,a.useCallback)((e=>{e.preventDefault(),x.current?.blur(),o?.(b)}),[o,b]),_=(0,a.useCallback)((()=>{Z(""),s?.(""),o?.("")}),[s,o]);return(0,c.tZ)(m,{onSubmit:D,className:v,children:(0,c.BX)(n.BZ,{children:[(0,c.tZ)(n.t_,{disablePointerEvents:!0,children:(0,c.tZ)(i.jV,{color:"subText",size:"xs"===p?"xs":"sm"})}),(0,c.tZ)(h,{...f,ref:x,type:"text",name:"query",autoComplete:"off",value:b,onChange:w,width:u,size:p}),(0,c.BX)(n.Oj,{children:[y,!!b&&(0,c.tZ)(g,{size:"zero",borderless:!0,onClick:_,icon:(0,c.tZ)(l.b,{size:"xs"}),"aria-label":(0,d.t)("Clear")})]})]})})}p.displayName="SearchBar";const m=(0,s.Z)("form",{target:"elu65nr2"})({name:"4bgdod",styles:"display:block;position:relative"}),h=(0,s.Z)(n.II,{target:"elu65nr1"})((e=>e.width&&`width: ${e.width};`),";"),g=(0,s.Z)(o.zx,{target:"elu65nr0"})("color:",(e=>e.theme.subText),";padding:",(0,u.Z)(.5),";"),v=p},"./app/utils/discover/charts.tsx":(e,t,r)=>{"use strict";r.d(t,{CX:()=>n,Xp:()=>c,gu:()=>l,x1:()=>d});var s=r("./app/locale.tsx"),a=r("./app/utils.tsx"),o=r("./app/utils/formatters.tsx");function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,a.ri)(e)?i(e,t):"—"}function i(e,t){if(!(0,a.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,o.rl)(e,2);case"duration":return(0,o.g9)(e/1e3,2,!0);case"size":return(0,a.F)(e);default:return e.toString()}}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return d(e,t,r,s)}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return r?(0,o.Du)(e):e.toLocaleString();case"percentage":return(0,o.rl)(e,0);case"duration":return u(e,s);case"size":return(0,a.F)(e,0);default:return e.toString()}}function u(e,t){if(t??=p(e),0===e)return"0";switch(t){case o.ps:{const t=(e/o.ps).toFixed(0);return(0,s.t)("%swk",t)}case o.x4:{const t=(e/o.x4).toFixed(0);return(0,s.t)("%sd",t)}case o.kr:{const t=(e/o.kr).toFixed(0);return(0,s.t)("%shr",t)}case o.EB:{const t=(e/o.EB).toFixed(0);return(0,s.t)("%smin",t)}case o.sh:{const t=(e/o.sh).toFixed(0);return(0,s.t)("%ss",t)}default:const t=e.toFixed(0);return(0,s.t)("%sms",t)}}function c(e,t){let r=0;const s=function(e,t){let r;if(e[0]?.data){let s,a=e[0];e.forEach(((r,o)=>{let{seriesName:n,data:i}=r;!1!==t?.selected?.[n]&&i.length&&(a=e[o],s??=e[o])})),s?.data&&(r={max:Math.max(...s.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...a.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return r}(e,t);if(s){const e=(s.max+s.min)/2;r=p((s.max-s.min)/5),(e/r).toFixed(0).length>6&&(r=p(e))}return r}function p(e){return e>=o.ps?o.ps:e>=o.x4?o.x4:e>=o.kr?o.kr:e>=o.EB?o.EB:e>=o.sh?o.sh:1}},"./app/utils/getPeriod.tsx":(e,t,r)=>{"use strict";r.d(t,{X:()=>i}),r("../node_modules/core-js/modules/es.error.cause.js");var s=r("../node_modules/moment/moment.js"),a=r.n(s),o=r("./app/constants/index.tsx"),n=r("./app/utils/dates.tsx");function i(e){let{period:t,start:r,end:s}=e,{shouldDoublePeriod:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t||r||s||(t=o.GY),t){if(!i)return{statsPeriod:t};const[,e,r]=t.match(/([0-9]+)([mhdw])/);return{statsPeriod:`${2*parseInt(e,10)}${r}`}}if(!r||!s)throw new Error("start and end required");const l=(0,n.v5)(r),d=(0,n.v5)(s);if(i){const e=a()(s).diff(a()(r)),t=a()(r).subtract(e);return{start:(0,n.v5)(t),end:d}}return{start:l,end:d}}},"./app/views/eventsV2/landing.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{DiscoverLanding:()=>Ne,default:()=>Re});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/react-router/es/index.js")),n=r("../node_modules/lodash/isEqual.js"),i=r.n(n),l=r("../node_modules/lodash/pick.js"),d=r.n(l),u=r("../node_modules/query-string/index.js"),c=r("./app/components/acl/feature.tsx"),p=r("./app/components/alert.tsx"),m=r("./app/components/assistant/guideAnchor.tsx"),h=r("./app/components/asyncComponent.tsx"),g=r("./app/components/breadcrumbs.tsx"),v=r("./app/components/button.tsx"),y=r("./app/components/compactSelect.tsx"),f=r("./app/components/layouts/thirds.tsx"),x=r("./app/components/noProjectMessage.tsx"),b=r("./app/components/searchBar.tsx"),Z=r("./app/components/sentryDocumentTitle.tsx"),w=r("./app/components/switchButton.tsx"),D=r("./app/locale.tsx"),_=r("./app/styles/space.tsx"),C=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),j=r("./app/utils/discover/eventView.tsx"),z=r("./app/utils/discover/urls.tsx"),P=r("./app/utils/queryString.tsx"),k=r("./app/utils/withOrganization.tsx"),M=r("./app/views/eventsV2/banner.tsx"),A=r("./app/views/eventsV2/data.tsx"),q=r("../node_modules/react/index.js"),S=r("../node_modules/moment/moment.js"),Q=r.n(S),T=r("./app/actionCreators/pageFilters.tsx"),B=r("./app/components/dropdownMenuControl.tsx"),N=r("./app/components/emptyStateWarning.tsx"),L=r("./app/components/pagination.tsx"),E=r("./app/components/timeSince.tsx"),Y=r("./app/icons/index.tsx"),R=r("./app/utils/parseLinkHeader.tsx"),X=r("./app/utils/withApi.tsx"),O=r("./app/views/eventsV2/savedQuery/utils.tsx"),$=(r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js")),V=r("./app/components/charts/areaChart.tsx"),W=r("./app/components/charts/barChart.tsx"),F=r("./app/components/charts/eventsGeoRequest.tsx"),H=r("./app/components/charts/eventsRequest.tsx"),I=r("./app/components/charts/lineChart.tsx"),U=r("./app/components/charts/utils.tsx"),G=r("./app/components/charts/worldMapChart.tsx"),J=r("./app/components/loadingIndicator.tsx"),K=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ee(e){let{isLoading:t=!1,isReloading:r=!1,maskBackgroundColor:s,className:a,children:o}=e;const n=(0,$.u)(),i=t||r;return(0,K.BX)(te,{className:a,children:[i&&(0,K.BX)("div",{children:[(0,K.tZ)(re,{isReloading:r,maskBackgroundColor:s??n.white}),(0,K.tZ)(se,{})]}),o]})}ee.displayName="LoadingContainer";const te=(0,a.Z)("div",{target:"eh2paf42"})({name:"bjn8wh",styles:"position:relative"}),re=(0,a.Z)("div",{target:"eh2paf41"})("position:absolute;z-index:1;background-color:",(e=>e.maskBackgroundColor),";width:100%;height:100%;opacity:",(e=>e.isReloading?"0.6":"1"),";"),se=(0,a.Z)(J.Z,{target:"eh2paf40"})({name:"1aa909c",styles:"position:absolute;z-index:3;width:100%"});var ae=r("./app/utils/dates.tsx"),oe=r("./app/utils/discover/charts.tsx"),ne=r("./app/utils/discover/fields.tsx"),ie=r("./app/utils/discover/types.tsx");class le extends q.Component{shouldComponentUpdate(e){return!i()(this.getRefreshProps(this.props),this.getRefreshProps(e))}getRefreshProps(e){const{organization:t,location:r,eventView:s,yAxis:a}=e,o=s.getEventsAPIPayload(r),n=o.query,i=o.start?(0,ae.hC)(o.start):null,l=o.end?(0,ae.hC)(o.end):null,d=o.statsPeriod,u=s.getDisplayMode(),c=u===ie.DC.TOP5||u===ie.DC.DAILYTOP5,p=u===ie.DC.DAILYTOP5||u===ie.DC.DAILY,m=c?o.field:void 0,h=c?ie.hY:void 0,g=c?(0,P.ro)(o.sort):void 0,v="bar"===u?"low":"high";return{organization:t,apiPayload:o,query:n,start:i,end:l,period:d,interval:p?"1d":s.interval?s.interval:(0,U.ZS)({start:i,end:l,period:d},v),project:s.project,environment:s.environment,yAxis:a??s.getYAxis(),field:m,topEvents:h,orderby:g,showDaily:p,expired:s.expired,name:s.name,display:u}}getChartType(e){let{showDaily:t}=e;return t?"bar":"area"}getChartComponent(e){switch(e){case"bar":return W.v;case"line":return I.w;case"area":return V.T;default:throw new Error(`Unknown multi plot type for ${e}`)}}render(){const{theme:e,api:t,referrer:r}=this.props,{query:s,start:a,end:o,period:n,interval:i,organization:l,project:d,environment:u,yAxis:c,field:p,topEvents:m,orderby:h,showDaily:g,expired:v,name:y,display:f}=this.getRefreshProps(this.props);return f===ie.DC.WORLDMAP?(0,K.tZ)(F.Z,{api:t,organization:l,yAxis:c,query:s,orderby:h,projects:d,period:n,start:a,end:o,environments:u,referrer:r,children:e=>{let{errored:t,loading:r,tableData:s}=e;if(t)return(0,K.tZ)(de,{children:(0,K.tZ)(Y.FC,{color:"gray300",size:"md"})});if(r)return(0,K.tZ)(de,{children:(0,K.tZ)(J.Z,{mini:!0})});const{data:a,title:o}=(0,U.JT)(s),n={height:100,series:[{seriesName:o,data:a}],fromDiscoverQueryList:!0};return(0,K.tZ)(G.y,{...n})}}):(0,K.tZ)(H.Z,{organization:l,api:t,query:s,start:a,end:o,period:n,interval:i,project:d,environment:u,includePrevious:!1,yAxis:c,field:p,topEvents:m,orderby:h,expired:v,name:y,referrer:r,hideError:!0,partial:!0,children:t=>{let{loading:r,timeseriesData:s,results:a,errored:o,errorMessage:n}=t;if(o)return(0,K.BX)(de,{children:[(0,K.tZ)(Y.FC,{color:"gray300",size:"md"}),(0,K.tZ)(ue,{children:n})]});if(r)return(0,K.tZ)(de,{children:(0,K.tZ)(J.Z,{mini:!0})});const i=s??a??[],l="bar"===f?f:this.getChartType({showDaily:g,yAxis:Array.isArray(c)?c[0]:c,timeseriesData:i}),d=i.map((e=>({...e,lineStyle:{opacity:"line"===l?1:0}}))),u=m&&m+1===i.length,p=i.length?[...e.charts.getColorPalette(i.length-2-(u?1:0))]:void 0;p&&p.length&&u&&p.push(e.chartOther);const h={colors:p,height:150,series:[...d],xAxis:{show:!1,axisPointer:{show:!1}},yAxis:{show:!0,axisLine:{show:!1},axisLabel:{color:e.chartLabel,fontFamily:e.text.family,fontSize:12,formatter:e=>(0,oe.gu)(e,(0,ne.Px)(Array.isArray(c)?c[0]:c),!0),inside:!0,showMinLabel:!1,showMaxLabel:!1},splitNumber:3,splitLine:{show:!1},zlevel:e.zIndex.header},tooltip:{show:!1},toolBox:{show:!1},grid:{left:0,top:0,right:0,bottom:0,containLabel:!1},stacked:"number"==typeof m&&m>0||Array.isArray(c)&&c.length>1},v=this.getChartComponent(l);return(0,K.tZ)(v,{...h})}})}}le.displayName="MiniGraph";const de=(0,a.Z)((e=>(0,K.tZ)(ee,{...e,maskBackgroundColor:"transparent"})),{target:"etx313f1"})({name:"khkb4p",styles:"height:150px;display:flex;justify-content:center;align-items:center"}),ue=(0,a.Z)("div",{target:"etx313f0"})("color:",(e=>e.theme.gray300),";margin-left:4px;"),ce=(0,X.Z)((0,$.b)(le));var pe=r("./app/components/activity/item/avatar.tsx"),me=r("./app/components/card.tsx"),he=r("./app/components/errorBoundary.tsx"),ge=r("./app/components/links/link.tsx");class ve extends q.PureComponent{constructor(){super(...arguments),(0,s.Z)(this,"handleClick",(()=>{const{onEventClick:e}=this.props;e?.()}))}render(){const{title:e,subtitle:t,queryDetail:r,renderContextMenu:s,renderGraph:a,createdBy:o,dateStatus:n}=this.props;return(0,K.tZ)(ge.Z,{"data-test-id":`card-${e}`,onClick:this.handleClick,to:this.props.to,children:(0,K.BX)(xe,{interactive:!0,children:[(0,K.BX)(be,{children:[(0,K.BX)(fe,{children:[(0,K.tZ)(Ze,{children:e}),(0,K.tZ)(we,{children:r})]}),(0,K.tZ)(ye,{children:o?(0,K.tZ)(pe.Z,{type:"user",user:o,size:34}):(0,K.tZ)(pe.Z,{type:"system",size:34})})]}),(0,K.tZ)(De,{children:(0,K.tZ)(ze,{mini:!0,children:a()})}),(0,K.BX)(_e,{children:[(0,K.BX)(Ce,{children:[t,n?(0,K.BX)(je,{children:[(0,D.t)("Edited")," ",n]}):null]}),s&&s()]})]})})}}ve.displayName="QueryCard";const ye=(0,a.Z)("span",{target:"ephg0d510"})("border:3px solid ",(e=>e.theme.border),";border-radius:50%;height:min-content;"),fe=(0,a.Z)("div",{target:"ephg0d59"})("flex-grow:1;overflow:hidden;margin-right:",(0,_.Z)(1),";"),xe=(0,a.Z)(me.Z,{target:"ephg0d58"})({name:"1h9y2eg",styles:"justify-content:space-between;height:100%;&:focus,&:hover{top:-1px;}"}),be=(0,a.Z)("div",{target:"ephg0d57"})("display:flex;padding:",(0,_.Z)(1.5)," ",(0,_.Z)(2),";"),Ze=(0,a.Z)("div",{target:"ephg0d56"})((e=>e.theme.text.cardTitle),";color:",(e=>e.theme.headingColor),";",(e=>e.theme.overflowEllipsis),";font-weight:initial;"),we=(0,a.Z)("div",{target:"ephg0d55"})("font-family:",(e=>e.theme.text.familyMono),";font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray300),";line-height:1.5;",(e=>e.theme.overflowEllipsis),";"),De=(0,a.Z)("div",{target:"ephg0d54"})("background:",(e=>e.theme.backgroundSecondary),";max-height:150px;height:100%;overflow:hidden;"),_e=(0,a.Z)("div",{target:"ephg0d53"})("display:flex;justify-content:space-between;align-items:center;padding:",(0,_.Z)(1)," ",(0,_.Z)(2),";"),Ce=(0,a.Z)("div",{target:"ephg0d52"})("font-size:",(e=>e.theme.fontSizeSmall),";display:grid;grid-column-gap:",(0,_.Z)(1),";",(e=>e.theme.overflowEllipsis),";color:",(e=>e.theme.textColor),";"),je=(0,a.Z)("span",{target:"ephg0d51"})("color:",(e=>e.theme.subText),";padding-left:",(0,_.Z)(1),";"),ze=(0,a.Z)(he.Z,{target:"ephg0d50"})({name:"qu9742",styles:"margin-bottom:100px"}),Pe=ve;var ke=r("./app/views/eventsV2/utils.tsx");class Me extends q.Component{constructor(){super(...arguments),(0,s.Z)(this,"handleDeleteQuery",(e=>{const{api:t,organization:r,onQueryChange:s,location:a,savedQueries:n}=this.props;(0,O.Uc)(t,r,e).then((()=>{1===n.length&&a.query.cursor?o.browserHistory.push({pathname:a.pathname,query:{...a.query,cursor:void 0}}):s()}))})),(0,s.Z)(this,"handleDuplicateQuery",((e,t)=>{const{api:r,location:s,organization:a,onQueryChange:n}=this.props;(e=e.clone()).name=`${e.name} copy`,(0,O.b2)(r,a,e,t).then((()=>{n(),o.browserHistory.push({pathname:s.pathname,query:{}})}))}))}componentDidMount(){(0,T.Z5)()}renderQueries(){const{pageLinks:e,renderPrebuilt:t}=this.props,r=(0,R.Z)(e||"");let s=[];return!t||r.previous&&!1!==r.previous.results||(s=s.concat(this.renderPrebuiltQueries())),s=s.concat(this.renderSavedQueries()),0===s.filter((e=>e)).length?(0,K.tZ)(Qe,{children:(0,K.tZ)("p",{children:(0,D.t)("No saved queries match that filter")})}):s}renderDropdownMenu(e){return(0,K.tZ)(B.Z,{items:e,trigger:e=>(0,K.tZ)(Se,{...e,"aria-label":(0,D.t)("Query actions"),size:"xs",borderless:!0,onClick:t=>{t.stopPropagation(),t.preventDefault(),e.onClick?.(t)},icon:(0,K.tZ)(Y.YR,{direction:"down",size:"sm"}),"data-test-id":"menu-trigger"}),position:"bottom-end",offset:4})}renderPrebuiltQueries(){const{api:e,location:t,organization:r,savedQuerySearchQuery:s,router:a}=this.props,o=(0,ke.Ur)(r),n="string"==typeof s&&s.length>0,i=n?s.toLowerCase():"";return o.map(((s,o)=>{const l=j.ZP.fromNewQueryWithLocation(s,t);if(n&&l.name&&!l.name.toLowerCase().includes(i))return null;const d=(0,D.t)("Last ")+l.statsPeriod,u=Q()(l.start).format("MMM D, YYYY h:mm A")+" - "+Q()(l.end).format("MMM D, YYYY h:mm A"),p=l.getResultsViewUrlTarget(r.slug),m=[{key:"add-to-dashboard",label:(0,D.t)("Add to Dashboard"),onAction:()=>(0,ke.F_)({eventView:l,location:t,query:s,organization:r,yAxis:s?.yAxis,router:a})},...r.features.includes("discover-query-builder-as-landing-page")?[{key:"set-as-default",label:(0,D.t)("Set as Default"),onAction:()=>{(0,O.RF)(e,r,l.toNewQuery()),(0,C.Z)("discover_v2.set_as_default",{organization:r,source:"context-menu",type:"prebuilt-query"})}}]:[]];return(0,K.tZ)(Pe,{to:p,title:l.name,subtitle:l.statsPeriod?d:u,queryDetail:l.query,createdBy:l.createdBy,renderGraph:()=>(0,K.tZ)(ce,{location:t,eventView:l,organization:r,referrer:"api.discover.homepage.prebuilt"}),onEventClick:()=>{(0,C.Z)("discover_v2.prebuilt_query_click",{organization:r,query_name:l.name})},renderContextMenu:()=>(0,K.tZ)(c.Z,{organization:r,features:["dashboards-edit"],children:e=>{let{hasFeature:t}=e;return t&&this.renderDropdownMenu(m)}})},`${o}-${l.name}`)}))}renderSavedQueries(){const{api:e,savedQueries:t,location:r,organization:s,router:a}=this.props;return t&&Array.isArray(t)&&0!==t.length?t.map(((t,o)=>{const n=j.ZP.fromSavedQuery(t),i=(0,D.t)("Last ")+n.statsPeriod,l=Q()(n.start).format("MMM D, YYYY h:mm A")+" - "+Q()(n.end).format("MMM D, YYYY h:mm A"),d=n.getResultsViewShortUrlTarget(s.slug),u=(0,K.tZ)(E.Z,{date:t.dateUpdated}),p=`api.discover.${n.getDisplayMode()}-chart`,m=o=>[...o?[{key:"add-to-dashboard",label:(0,D.t)("Add to Dashboard"),onAction:()=>(0,ke.F_)({eventView:n,location:r,query:t,organization:s,yAxis:t?.yAxis??n.yAxis,router:a})}]:[],...s.features.includes("discover-query-builder-as-landing-page")?[{key:"set-as-default",label:(0,D.t)("Set as Default"),onAction:()=>{(0,O.RF)(e,s,n.toNewQuery()),(0,C.Z)("discover_v2.set_as_default",{organization:s,source:"context-menu",type:"saved-query"})}}]:[],{key:"duplicate",label:(0,D.t)("Duplicate Query"),onAction:()=>this.handleDuplicateQuery(n,(0,P.qP)(t.yAxis))},{key:"delete",label:(0,D.t)("Delete Query"),priority:"danger",onAction:()=>this.handleDeleteQuery(n)}];return(0,K.tZ)(Pe,{to:d,title:n.name,subtitle:n.statsPeriod?i:l,queryDetail:n.query,createdBy:n.createdBy,dateStatus:u,onEventClick:()=>{(0,C.Z)("discover_v2.saved_query_click",{organization:s})},renderGraph:()=>(0,K.tZ)(ce,{location:r,eventView:n,organization:s,referrer:p,yAxis:t.yAxis&&t.yAxis.length?t.yAxis:["count()"]}),renderContextMenu:()=>(0,K.tZ)(c.Z,{organization:s,features:["dashboards-edit"],children:e=>{let{hasFeature:t}=e;return this.renderDropdownMenu(m(t))}})},`${o}-${n.id}`)})):[]}render(){const{pageLinks:e}=this.props;return(0,K.BX)(q.Fragment,{children:[(0,K.tZ)(qe,{children:this.renderQueries()}),(0,K.tZ)(Ae,{pageLinks:e,onCursor:(e,t,r,s)=>{const a=Number(e?.split(":")?.[1]??0),n={...r,cursor:e};a<=0&&-1===s&&delete n.cursor,o.browserHistory.push({pathname:t,query:n})}})]})}}Me.displayName="QueryList";const Ae=(0,a.Z)(L.Z,{target:"e5mzxks3"})({name:"1azpx8r",styles:"margin-bottom:20px"}),qe=(0,a.Z)("div",{target:"e5mzxks2"})("display:grid;grid-template-columns:minmax(100px, 1fr);gap:",(0,_.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:repeat(2, minmax(100px, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints.large),"){grid-template-columns:repeat(3, minmax(100px, 1fr));}"),Se=(0,a.Z)(v.zx,{target:"e5mzxks1"})("transform:translateX(",(0,_.Z)(1),");"),Qe=(0,a.Z)(N.Z,{target:"e5mzxks0"})({name:"1wygoze",styles:"grid-column:1/4"}),Te=(0,X.Z)(Me),Be=[{label:(0,D.t)("My Queries"),value:"myqueries"},{label:(0,D.t)("Recently Edited"),value:"-dateUpdated"},{label:(0,D.t)("Query Name (A-Z)"),value:"name"},{label:(0,D.t)("Date Created (Newest)"),value:"-dateCreated"},{label:(0,D.t)("Date Created (Oldest)"),value:"dateCreated"},{label:(0,D.t)("Most Outdated"),value:"dateUpdated"},{label:(0,D.t)("Most Popular"),value:"mostPopular"},{label:(0,D.t)("Recently Viewed"),value:"recentlyViewed"}];class Ne extends h.Z{constructor(){super(...arguments),(0,s.Z)(this,"state",{loading:!0,reloading:!1,error:!1,errors:{},renderPrebuilt:(0,ke.tG)(),savedQueries:null,savedQueriesPageLinks:""}),(0,s.Z)(this,"shouldReload",!0),(0,s.Z)(this,"handleQueryChange",(()=>{this.fetchData({reloading:!0})})),(0,s.Z)(this,"handleSearchQuery",(e=>{const{location:t}=this.props;o.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(e).trim()||void 0}})})),(0,s.Z)(this,"handleSortChange",(e=>{const{location:t,organization:r}=this.props;(0,C.Z)("discover_v2.change_sort",{organization:r,sort:e}),o.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,sort:e}})})),(0,s.Z)(this,"togglePrebuilt",(()=>{const{renderPrebuilt:e}=this.state;this.setState({renderPrebuilt:!e},(()=>{(0,ke.u)(!e),this.fetchData({reloading:!0})}))}))}getSavedQuerySearchQuery(){const{location:e}=this.props;return(0,P.ro)(e.query.query,"").trim()}getActiveSort(){const{location:e}=this.props,t=(0,P.ro)(e.query.sort,"myqueries");return Be.find((e=>e.value===t))||Be[0]}getEndpoints(){const{organization:e,location:t}=this.props,r=(0,ke.Ur)(e),s=this.getSavedQuerySearchQuery(),a=(0,P.ro)(t.query.cursor);let o=9;const n=this.state?this.state.renderPrebuilt:(0,ke.tG)();if(!a&&n)if(s&&s.length>0){const e=s.toLowerCase(),a=r.reduce(((r,s)=>{const a=j.ZP.fromNewQueryWithLocation(s,t);return a.name&&a.name.toLowerCase().includes(e)?r+1:r}),0);o=Math.max(1,o-a)}else o=Math.max(1,o-r.length);const i={cursor:a,query:`version:2 name:"${s}"`,per_page:o.toString(),sortBy:this.getActiveSort().value};return a||delete i.cursor,[["savedQueries",`/organizations/${e.slug}/discover/saved/`,{query:i}]]}componentDidUpdate(e){const t=["sort","cursor","query"];!i()(d()(e.location.query,t),d()(this.props.location.query,t))&&this.fetchData()}renderBanner(){const{location:e,organization:t}=this.props,r=j.ZP.fromNewQueryWithLocation(A.eP,e).getResultsViewUrlTarget(t.slug),s=`${r.pathname}?${(0,u.stringify)(r.query)}`;return t.features.includes("discover-query-builder-as-landing-page")?null:(0,K.tZ)(M.Z,{organization:t,resultsUrl:s})}renderActions(){const e=this.getActiveSort(),{renderPrebuilt:t,savedQueries:r}=this.state;return(0,K.BX)(Ye,{children:[(0,K.tZ)(Ee,{defaultQuery:"",query:this.getSavedQuerySearchQuery(),placeholder:(0,D.t)("Search saved queries"),onSearch:this.handleSearchQuery}),(0,K.BX)(Le,{children:["Show Prebuilt",(0,K.tZ)(w.Z,{isActive:t,isDisabled:t&&0===(r??[]).length,size:"lg",toggle:this.togglePrebuilt})]}),(0,K.tZ)(y.Z,{triggerProps:{prefix:(0,D.t)("Sort By")},value:e.value,options:Be,onChange:e=>this.handleSortChange(e.value),position:"bottom-end"})]})}renderNoAccess(){return(0,K.tZ)(f.T3,{withPadding:!0,children:(0,K.tZ)(p.bZ,{type:"warning",children:(0,D.t)("You don't have access to this feature")})})}renderBody(){const{location:e,organization:t,router:r}=this.props,{savedQueries:s,savedQueriesPageLinks:a,renderPrebuilt:o}=this.state;return(0,K.tZ)(Te,{pageLinks:a,savedQueries:s??[],savedQuerySearchQuery:this.getSavedQuerySearchQuery(),renderPrebuilt:o,location:e,organization:t,onQueryChange:this.handleQueryChange,router:r})}renderBreadcrumbs(){return(0,K.tZ)(g.Z,{crumbs:[{key:"discover-homepage",label:(0,D.t)("Discover"),to:(0,z.zR)(this.props.organization)},{key:"discover-saved-queries",label:(0,D.t)("Saved Queries")}]})}render(){const{location:e,organization:t}=this.props,r=j.ZP.fromNewQueryWithLocation(A.eP,e),s=t.features.includes("discover-query-builder-as-landing-page")?`/organizations/${t.slug}/discover/homepage/`:r.getResultsViewUrlTarget(t.slug);return(0,K.tZ)(c.Z,{organization:t,features:["discover-query"],renderDisabled:this.renderNoAccess,children:(0,K.tZ)(Z.Z,{title:(0,D.t)("Discover"),orgSlug:t.slug,children:(0,K.tZ)(f.T3,{children:(0,K.BX)(x.Z,{organization:t,children:[(0,K.BX)(f.h4,{children:[(0,K.tZ)(f.oB,{children:t.features.includes("discover-query-builder-as-landing-page")?this.renderBreadcrumbs():(0,K.tZ)(f.Dx,{children:(0,K.tZ)(m.Z,{target:"discover_landing_header",children:(0,D.t)("Discover")})})}),(0,K.tZ)(f.kP,{children:(0,K.tZ)(v.zx,{"data-test-id":"build-new-query",to:s,size:"sm",priority:"primary",onClick:()=>{(0,C.Z)("discover_v2.build_new_query",{organization:t})},children:(0,D.t)("Build a new query")})})]}),(0,K.tZ)(f.uT,{children:(0,K.BX)(f.or,{fullWidth:!0,children:[this.renderBanner(),this.renderActions(),this.renderComponent()]})})]})})})})}}Ne.displayName="DiscoverLanding";const Le=(0,a.Z)("label",{target:"e1j093sv2"})("display:flex;align-items:center;gap:",(0,_.Z)(1.5),";font-weight:normal;margin:0;"),Ee=(0,a.Z)(b.Z,{target:"e1j093sv1"})({name:"1ff36h2",styles:"flex-grow:1"}),Ye=(0,a.Z)("div",{target:"e1j093sv0"})("display:grid;gap:",(0,_.Z)(2),";grid-template-columns:auto max-content min-content;align-items:center;margin-bottom:",(0,_.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:auto;}"),Re=(0,k.Z)(Ne)},"../node_modules/echarts/lib/component/helper/RoamController.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r("../node_modules/echarts/node_modules/tslib/tslib.es6.js"),a=r("../node_modules/zrender/lib/core/Eventful.js"),o=r("../node_modules/zrender/lib/core/event.js"),n=r("../node_modules/echarts/lib/component/helper/interactionMutex.js"),i=r("../node_modules/zrender/lib/core/util.js");function l(e,t,r,s,a){e.pointerChecker&&e.pointerChecker(s,a.originX,a.originY)&&(o.sT(s.event),d(e,t,r,s,a))}function d(e,t,r,s,a){a.isAvailableBehavior=(0,i.bind)(u,null,r,s),e.trigger(t,a)}function u(e,t,r){var s=r[e];return!e||s&&(!(0,i.isString)(s)||t.event[s+"Key"])}const c=function(e){function t(t){var r=e.call(this)||this;r._zr=t;var s=(0,i.bind)(r._mousedownHandler,r),a=(0,i.bind)(r._mousemoveHandler,r),o=(0,i.bind)(r._mouseupHandler,r),n=(0,i.bind)(r._mousewheelHandler,r),l=(0,i.bind)(r._pinchHandler,r);return r.enable=function(e,r){this.disable(),this._opt=(0,i.defaults)((0,i.clone)(r)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",s),t.on("mousemove",a),t.on("mouseup",o)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",n),t.on("pinch",l))},r.disable=function(){t.off("mousedown",s),t.off("mousemove",a),t.off("mouseup",o),t.off("mousewheel",n),t.off("pinch",l)},r}return(0,s.ZT)(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!o.x1(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var r=e.offsetX,s=e.offsetY;this.pointerChecker&&this.pointerChecker(e,r,s)&&(this._x=r,this._y=s,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&u("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!n.Tf(this._zr,"globalPan")){var t=e.offsetX,r=e.offsetY,s=this._x,a=this._y,i=t-s,l=r-a;this._x=t,this._y=r,this._opt.preventDefaultMouseMove&&o.sT(e.event),d(this,"pan","moveOnMouseMove",e,{dx:i,dy:l,oldX:s,oldY:a,newX:t,newY:r,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){o.x1(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=u("zoomOnMouseWheel",e,this._opt),r=u("moveOnMouseWheel",e,this._opt),s=e.wheelDelta,a=Math.abs(s),o=e.offsetX,n=e.offsetY;if(0!==s&&(t||r)){if(t){var i=a>3?1.4:a>1?1.2:1.1;l(this,"zoom","zoomOnMouseWheel",e,{scale:s>0?i:1/i,originX:o,originY:n,isAvailableBehavior:null})}if(r){var d=Math.abs(s);l(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(s>0?1:-1)*(d>3?.4:d>1?.15:.05),originX:o,originY:n,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){n.Tf(this._zr,"globalPan")||l(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(a.Z)},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,r)=>{var s=r("../node_modules/lodash/_baseIteratee.js"),a=r("../node_modules/lodash/negate.js"),o=r("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return o(e,a(s(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_eventsV2_landing_tsx-node_modules_echarts_lib_component_helper_RoamController_js.fa934c6864d8fb897591ba9a0acdcc62.js.map