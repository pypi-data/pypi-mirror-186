"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_sessions_tsx-app_views_performance_trends_changedTransactions_tsx","app_utils_sessions_tsx"],{"./app/utils/sessions.tsx":(e,t,r)=>{r.d(t,{BN:()=>x,FS:()=>E,Lv:()=>A,Pn:()=>v,SU:()=>f,U5:()=>Z,VH:()=>m,Xz:()=>w,Y5:()=>R,hD:()=>S,iy:()=>_,sA:()=>g,wt:()=>y}),r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("../node_modules/lodash/compact.js"),s=r.n(n),a=r("../node_modules/lodash/mean.js"),o=r.n(a),i=r("../node_modules/moment/moment.js"),l=r.n(i),d=r("./app/components/charts/utils.tsx"),c=r("./app/types/index.tsx"),p=r("./app/utils.tsx"),u=r("./app/views/releases/utils/index.tsx"),h=r("./app/views/releases/utils/sessionTerm.tsx");const m=10;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce(((e,r)=>e+r.totals[t]),0)}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return e.reduce(((e,n)=>e+n.series[t][r]),0)}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const r=x(e,t,c.$y.CRASHED);return(0,p.ri)(r)?(0,u.Mf)(100-r):null}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=Array(r.length).fill(0),s=e.map((e=>e.series[t]));return s.forEach((e=>{e.forEach(((e,t)=>n[t]+=e))})),n}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const n=g(e,t),s=g(e.filter((e=>{let{by:t}=e;return t["session.status"]===r})),t);return(0,p.ri)(n)&&0!==n?(0,p.aQ)(s??0,n??0):null}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return s()(t.map(((t,n)=>{const s=e.reduce(((e,t)=>e+(t.series[r]?.[n]??0)),0),a=e.find((e=>e.by["session.status"]===c.$y.CRASHED))?.series[r]?.[n]??0,o=(0,p.aQ)(a,s);return 0===s?null:{name:t,value:(0,u.Mf)(100-o)}})))}function R(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return s()(t.map(((t,s)=>{const a=e.reduce(((e,t)=>e+t.series[r][s]),0),o=e.find((e=>e.by["session.status"]===n))?.series[r][s]??0,i=(0,p.aQ)(o,a);return 0===a?null:{name:t,value:(0,u.r)(i)}})))}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return r.map(((r,s)=>{const a=e.reduce(((e,t)=>e+(t.series[n]?.[s]??0)),0),o=t.reduce(((e,t)=>e+(t.series[n]?.[s]??0)),0),i=(0,p.aQ)(a,o);return{name:r,value:Math.round(i)}}))}function _(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return r.map(((r,n)=>({name:r,value:t?.series[e][n]??0})))}function A(e){const t=e.charts.getColorPalette(14);return{[c.$y.HEALTHY]:{seriesName:h.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ERRORED]:{seriesName:h.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ABNORMAL]:{seriesName:h.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.CRASHED]:{seriesName:h.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function w(e){let{highFidelity:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,d.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),r>=d.Zn?"1d":r>=d.B8?"4h":r>=d.aC?"1h":t?r<=m?"10s":r<=30?"1m":"5m":"1h"}function Z(e,t,r){if(!t||!r)return e;const n=[],s=e.intervals.filter(((e,s)=>{const a=l().utc(e).isBetween(l().utc(t),l().utc(r),void 0,"[]");return a&&n.push(s),a})),a=e.groups.map((e=>{const t={},r={};return Object.keys(e.series).forEach((s=>{r[s]=0,t[s]=e.series[s].filter(((e,t)=>{const a=n.includes(t);return a&&(r[s]=(r[s]??0)+e),a})),s.startsWith("p50")&&(r[s]=o()(t[s])),s.startsWith("count_unique")&&(r[s]=e.totals[s])})),{...e,series:t,totals:r}}));return{start:s[0],end:s[s.length-1],query:e.query,intervals:s,groups:a}}},"./app/views/performance/trends/changedTransactions.tsx":(e,t,r)=>{r.d(t,{H:()=>V,Z:()=>pe});var n,s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),o=r("../node_modules/react-router/es/index.js"),i=r("./app/components/button.tsx"),l=r("./app/components/charts/styles.tsx"),d=r("./app/components/count.tsx"),c=r("./app/components/dropdownLink.tsx"),p=r("./app/components/duration.tsx"),u=r("./app/components/emptyStateWarning.tsx"),h=r("./app/components/forms/controls/radioGroup.tsx"),m=r("./app/components/idBadge/index.tsx"),g=r("./app/components/links/link.tsx"),f=r("./app/components/loadingIndicator.tsx"),v=r("./app/components/menuItem.tsx"),y=r("./app/components/pagination.tsx"),x=r("./app/components/panels/index.tsx"),E=r("./app/components/questionTooltip.tsx"),R=r("./app/components/radio.tsx"),S=r("./app/components/tooltip.tsx"),_=r("./app/icons/index.tsx"),A=r("./app/locale.tsx"),w=r("./app/styles/space.tsx"),Z=r("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),N=r("./app/utils/formatters.tsx"),b=r("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),T=r("./app/utils/queryString.tsx"),C=r("./app/utils/tokenizeSearch.tsx"),j=r("./app/utils/useApi.tsx"),L=r("./app/utils/withOrganization.tsx"),D=r("./app/utils/withProjects.tsx"),O=r("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),H=r("./app/views/performance/transactionSummary/utils.tsx"),F=r("./app/views/performance/trends/chart.tsx"),k=r("./app/views/performance/trends/types.tsx"),q=r("./app/views/performance/trends/utils.tsx"),B=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function P(e){switch(e){case k.ER.IMPROVED:return(0,A.t)("Most Improved Transactions");case k.ER.REGRESSION:return(0,A.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function M(e,t,r){const n=(0,q.j_)(t),s=(0,T.ro)(e.query[n]);if(!r)return;return r.find((e=>`${e.transaction}-${e.project}`===s))||(r.length>0?r[0]:void 0)}function z(e,t,r){return function(n){const s=(0,q.j_)(r),a={...e.query};n?a[s]=n?`${n.transaction}-${n.project}`:void 0:delete a[s],o.browserHistory.push({pathname:e.pathname,query:a}),(0,Z.Z)("performance_views.trends.widget_interaction",{organization:t,widget_type:r})}}function I(e,t,r,s,a,i,l){const d=(0,q.IO)(e,i,l).column,c=(0,T.ro)(e.query.query),p=new C.MY(c??""),u=p.getFilterValues(d),h=s===n.GREATER_THAN_EQUALS?">":"<";u&&u.forEach((e=>{(e.startsWith(s)||e.startsWith(h))&&p.removeFilterValue(d,e)})),p.addFilterValues(d,[`${s}${r}`]);const m=p.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(m).trim()}}),(0,Z.Z)("performance_views.trends.change_duration",{organization:t,widget_type:P(a),value:`${s}${r}`})}function U(e){const{location:t,trendChangeType:r,previousTrendFunction:n,previousTrendColumn:s,organization:i,projects:l,setError:d}=e,c=(0,j.Z)(),p=e.trendView.clone(),u=P(r);(0,q.kM)(p,t,r,l);const h=(e=>(t,r,n)=>{const s={};e===k.ER.IMPROVED?s.improvedCursor=t:e===k.ER.REGRESSION&&(s.regressionCursor=t),delete n[(0,q.j_)(e)],o.browserHistory.push({pathname:r,query:{...n,...s}})})(r),m=(0,T.ro)(t.query[q.vt[r]]),g=e=>{(0,Z.Z)("performance_views.trends.widget_pagination",{organization:i,direction:e,widget_type:P(r)})};return(0,B.tZ)(b.ZP,{eventView:p,orgSlug:i.slug,location:t,trendChangeType:r,cursor:m,limit:5,setError:e=>d(e?.message),children:o=>{let{isLoading:d,trendsData:m,pageLinks:v}=o;const x=(0,q.CE)(t),R=(0,q.IO)(t,l,p.project),S=(0,q.RP)(m&&m.events&&m.events.data||[]),_=M(t,r,S),w=m?.stats||{},Z=S&&S.slice?S.slice(0,5):[],N=d&&n?n:x.field,b=d&&s?s:R.column,T=(0,A.t)("This compares the baseline (%s) of the past with the present.",x.legendLabel);return(0,B.BX)(G,{"data-test-id":"changed-transactions",children:[(0,B.BX)(Q,{children:[(0,B.BX)(K,{children:[u,(0,B.tZ)(E.Z,{size:"sm",position:"top",title:T})]}),d?(0,B.tZ)(f.Z,{style:{margin:"237px auto"}}):(0,B.tZ)(a.Fragment,{children:Z.length?(0,B.BX)(a.Fragment,{children:[(0,B.tZ)(W,{children:(0,B.tZ)(F.Z,{statsData:w,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:_,isLoading:d,...e})}),Z.map(((n,s)=>(0,B.tZ)($,{api:c,currentTrendFunction:N,currentTrendColumn:b,trendView:e.trendView,organization:i,transaction:n,index:s,trendChangeType:r,transactions:Z,location:t,projects:l,statsData:w,handleSelectTransaction:z(t,i,r)},n.transaction)))]}):(0,B.tZ)(te,{small:!0,children:(0,A.t)("No results")})})]}),(0,B.tZ)(y.Z,{pageLinks:v,onCursor:h,paginationAnalyticsEvent:g})]})}})}function $(e){const{transaction:t,transactions:r,trendChangeType:s,currentTrendFunction:i,currentTrendColumn:l,index:p,location:u,organization:g,projects:f,handleSelectTransaction:y,trendView:x}=e,E=q.es[s].default,w=M(u,s,r)===t,Z=f.find((e=>{let{slug:r}=e;return r===t.project})),b=t.aggregate_range_2,j=t.aggregate_range_1,L=(0,N.rl)(Math.abs(t.trend_percentage-1),0),D=(0,N.g9)(j/1e3,j<1e3&&j>10?0:2),O=(0,N.g9)(b/1e3,b<1e3&&b>10?0:2),H=(0,A.t)("Over this period, the %s for %s has %s %s from %s to %s",i,l,s===k.ER.IMPROVED?(0,A.t)("decreased"):(0,A.t)("increased"),L,D,O),F=s===k.ER.IMPROVED?j:b,P=s===k.ER.IMPROVED?D:O;return(0,B.BX)(re,{"data-test-id":"trends-list-item-"+s,children:[(0,B.tZ)(ne,{color:E,children:(0,B.tZ)(S.ZP,{title:(0,B.BX)(de,{children:[(0,B.tZ)("span",{children:(0,A.t)("Total Events")}),(0,B.BX)("span",{children:[(0,B.tZ)(d.Z,{value:t.count_range_1}),(0,B.tZ)(ce,{direction:"right",size:"xs"}),(0,B.tZ)(d.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,B.tZ)(h.V,{index:p,role:"radio",children:(0,B.tZ)(R.Z,{checked:w,onChange:()=>y(t)})})})}),(0,B.tZ)(Y,{...e}),(0,B.tZ)(ie,{children:(0,B.tZ)(S.ZP,{title:H,children:(0,B.BX)(a.Fragment,{children:[s===k.ER.REGRESSION?"+":"",(0,N.rl)(t.trend_percentage-1,0)]})})}),(0,B.BX)(c.Z,{caret:!1,anchorRight:!0,title:(0,B.tZ)(J,{size:"xs",icon:(0,B.tZ)(_.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,A.t)("Actions")}),children:[(0,B.tZ)(v.Z,{onClick:()=>I(u,g,F,n.LESS_THAN_EQUALS,s,f,x.project),children:(0,B.tZ)(ee,{children:(0,A.t)("Show ≤ %s",P)})}),(0,B.tZ)(v.Z,{onClick:()=>I(u,g,F,n.GREATER_THAN_EQUALS,s,f,x.project),children:(0,B.tZ)(ee,{children:(0,A.t)("Show ≥ %s",P)})}),(0,B.tZ)(v.Z,{onClick:()=>function(e,t){const r=(0,T.ro)(e.query.query),n=new C.MY(r??"");n.addFilterValues("!transaction",[t]);const s=n.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(s).trim()}})}(u,t.transaction),children:(0,B.tZ)(ee,{children:(0,A.t)("Hide from list")})})]}),(0,B.BX)(ae,{children:[Z&&(0,B.tZ)(S.ZP,{title:t.project,children:(0,B.tZ)(m.Z,{avatarSize:16,project:Z,hideName:!0})}),(0,B.tZ)(V,{...e})]}),(0,B.tZ)(le,{color:E,children:(0,B.tZ)(X,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(n||(n={})),U.displayName="ChangedTransactions",$.displayName="TrendsListItem";const V=e=>{let{transaction:t}=e;const{fromSeconds:r,toSeconds:n,showDigits:s}=(0,q.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,B.BX)(oe,{children:[(0,B.tZ)(p.Z,{seconds:r,fixedDigits:s?1:0,abbreviation:!0}),(0,B.tZ)(ce,{direction:"right",size:"xs"}),(0,B.tZ)(p.Z,{seconds:n,fixedDigits:s?1:0,abbreviation:!0})]})};V.displayName="CompareDurations";const X=e=>{let{transaction:t,trendChangeType:r}=e;const{seconds:n,fixedDigits:s,changeLabel:a}=(0,q.wx)(t.trend_difference,r);return(0,B.BX)("span",{children:[(0,B.tZ)(p.Z,{seconds:n,fixedDigits:s,abbreviation:!0})," ",a]})};X.displayName="ValueDelta";const Y=e=>{const{organization:t,trendView:r,transaction:n,projects:s,currentTrendFunction:a,currentTrendColumn:o}=e,i=r.clone(),l=(0,q._H)(n,s),d=(0,H.e1)({orgSlug:t.slug,transaction:String(n.transaction),query:i.generateQueryStringObject(),projectID:l,display:O.D.TREND,trendFunction:a,trendColumn:o});return(0,B.tZ)(se,{to:d,"data-test-id":"item-transaction-name",children:n.transaction})};Y.displayName="TransactionSummaryLink";const G=(0,s.Z)("div",{target:"efd374915"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Q=(0,s.Z)(x.s_,{target:"efd374914"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),W=(0,s.Z)("div",{target:"efd374913"})("padding:",(0,w.Z)(3),";"),K=(0,s.Z)(l.ws,{target:"efd374912"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,w.Z)(2)," ",(0,w.Z)(3),";"),J=(0,s.Z)(i.zx,{target:"efd374911"})({name:"1989ovb",styles:"vertical-align:middle"}),ee=(0,s.Z)("div",{target:"efd374910"})("white-space:nowrap;color:",(e=>e.theme.textColor),";");ee.defaultProps={"data-test-id":"menu-action"};const te=(0,s.Z)(u.Z,{target:"efd37499"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),re=(0,s.Z)("div",{target:"efd37498"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,w.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,w.Z)(1)," ",(0,w.Z)(2),";"),ne=(0,s.Z)("div",{target:"efd37497"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),se=(0,s.Z)(g.Z,{target:"efd37496"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,w.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),ae=(0,s.Z)("div",{target:"efd37495"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),oe=(0,s.Z)("span",{target:"efd37494"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,w.Z)(1),";"),ie=(0,s.Z)("div",{target:"efd37493"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),le=(0,s.Z)("div",{target:"efd37492"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),de=(0,s.Z)("div",{target:"efd37491"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),ce=(0,s.Z)(_.CC,{target:"efd37490"})("margin:0 ",(0,w.Z)(1),";"),pe=(0,D.Z)((0,L.Z)(U))},"./app/views/performance/trends/chart.tsx":(e,t,r)=>{r.d(t,{Z:()=>S,k:()=>R}),r("../node_modules/core-js/modules/es.array.push.js");var n=r("../node_modules/react-router/es/index.js"),s=r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),a=r("./app/components/charts/chartZoom.tsx"),o=r("./app/components/charts/lineChart.tsx"),i=r("./app/components/charts/transitionChart.tsx"),l=r("./app/components/charts/transparentLoadingMask.tsx"),d=r("./app/components/organizations/pageFilters/parse.tsx"),c=r("./app/locale.tsx"),p=r("./app/utils/dates.tsx"),u=r("./app/utils/discover/charts.tsx"),h=r("./app/utils/discover/fields.tsx"),m=r("./app/utils/getDynamicText.tsx"),g=r("./app/utils/queryString.tsx"),f=r("./app/utils/useLocation.tsx"),v=r("./app/utils/useRouter.tsx"),y=r("./app/views/performance/trends/utils.tsx"),x=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function E(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function R(e){let{trendChangeType:t,statsPeriod:r,transaction:R,statsData:S,isLoading:_,start:A,end:w,trendFunctionField:Z,disableXAxis:N,disableLegend:b,grid:T,height:C,projects:j,project:L}=e;const D=(0,f.T)(),O=(0,v.Z)(),H=(0,s.u)(),F=e=>{const{selected:r}=e,s=Object.keys(r).filter((e=>!r[e])),a={...D.query};a[(0,y.P4)(t)]=s;const o={...D,query:a};n.browserHistory.push(o)},k=y.es[t||""],q=(S&&R?.project&&R?.transaction?S[[R.project,R.transaction].join(",")]:void 0)?.data??[],B=(0,y.CE)(D,Z),P=(0,y.IO)(D,j,L),M=(0,y.ed)(B.field,P.column),z=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,r]=e;return{name:1e3*t,value:r.reduce(((e,t)=>{let{count:r}=t;return e+r}),0)}}))}]}(q,M),{smoothedResults:I,minValue:U,maxValue:$}=(0,y.vq)(z,M),V=A?(0,p.hC)(A):null,X=w?(0,p.hC)(w):null,{utc:Y}=(0,d.fK)(D.query),G=(0,g.qP)(D.query[(0,y.P4)(t)]).reduce(((e,t)=>(e[t]=!1,e)),{}),Q=b?{show:!1}:{...E(M),selected:G},W=_,K=_,J=Math.max($,R?.aggregate_range_2||0,R?.aggregate_range_1||0),ee=Math.min(U,R?.aggregate_range_1||Number.MAX_SAFE_INTEGER,R?.aggregate_range_2||Number.MAX_SAFE_INTEGER),te=I?I.map((e=>({...e,color:k.default,lineStyle:{opacity:1}}))):[],re=function(e,t,r,n){if(!(n&&t.length&&t[0].data&&t[0].data.length))return[];const s=parseInt(t[0].data[0].name,10),a=parseInt(t[0].data.slice(-1)[0].name,10);if(a<s)return[];const o={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{color:e.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:e.textColor,silent:!0},l={...o,markLine:{...o.markLine},seriesName:"Baseline"},d={...o,markLine:{...o.markLine},seriesName:"Baseline"},p={...o,markLine:{...o.markLine},seriesName:"Period split"},h=.5*(a-s)+s;return l.markLine.data=[[{value:"Past",coord:[s,n.aggregate_range_1]},{coord:[h,n.aggregate_range_1]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Past Baseline")}</strong></span>`,(0,u.CX)(n.aggregate_range_1,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},d.markLine.data=[[{value:"Present",coord:[h,n.aggregate_range_2]},{coord:[a,n.aggregate_range_2]}]],d.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,c.t)("Present Baseline")}</strong></span>`,(0,u.CX)(n.aggregate_range_2,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:h}],label:{show:!1},lineStyle:{color:e.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},l.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},d.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[l,d,p]}(H,I||[],0,R),ne=.1*(J-ee),se=[...te,...re],ae=(0,u.Xp)(se),oe={tooltip:{valueFormatter:(e,t)=>(0,u.CX)(e,(0,h.Px)(t))},yAxis:{min:Math.max(0,ee-ne),max:J+ne,minInterval:ae,axisLabel:{color:H.chartLabel,formatter:e=>(0,u.gu)(e,"duration",void 0,ae)}}};return(0,x.tZ)(a.Z,{router:O,period:r,start:V,end:X,utc:"true"===Y,children:e=>(0,x.BX)(i.Z,{loading:W,reloading:K,children:[(0,x.tZ)(l.Z,{visible:K}),(0,m.Z)({value:(0,x.tZ)(o.w,{height:C,...e,...oe,onLegendSelectChanged:F,series:se,seriesOptions:{showSymbol:!1},legend:Q,toolBox:{show:!1},grid:T??{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:N?{show:!1}:void 0}),fixed:"Duration Chart"})]})})}R.displayName="Chart";const S=R},"./app/views/releases/utils/index.tsx":(e,t,r)=>{r.d(t,{C8:()=>b,EB:()=>j,G$:()=>_,Jl:()=>L,Mf:()=>E,O7:()=>T,PS:()=>A,TB:()=>Z,eY:()=>w,hf:()=>x,me:()=>D,r:()=>S,rF:()=>N,zB:()=>R}),r("../node_modules/core-js/modules/es.array.includes.js");var n=r("../node_modules/lodash/pick.js"),s=r.n(n),a=r("../node_modules/lodash/round.js"),o=r.n(a),i=r("../node_modules/moment/moment.js"),l=r.n(i),d=r("./app/components/links/externalLink.tsx"),c=r("./app/components/organizations/pageFilters/parse.tsx"),p=r("./app/constants/pageFilters.tsx"),u=r("./app/data/platformCategories.tsx"),h=r("./app/locale.tsx"),m=r("./app/types/index.tsx"),g=r("./app/utils.tsx"),f=r("./app/utils/tokenizeSearch.tsx"),v=r("./app/views/issueList/utils.tsx"),y=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x=95,E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const n=o()(e,e>t?r:0);return 100===n&&e<100?Math.floor(e*Math.pow(10,r))/Math.pow(10,r):n},R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(isNaN(e))return"―";if(e<1&&e>0)return"<1%";const n=E(e,t,r).toLocaleString();return`${n}%`},S=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o()(t?Math.abs(e):e,3)},_=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return`${S(e,t).toLocaleString()}%`},A=(e,t,r)=>({pathname:`/organizations/${e}/issues/`,query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new f.MY([`firstRelease:${r}`]).formatString(),sort:v.qh.FREQ}}),w=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...n,project:t,query:new f.MY([`release:${r}`,"error.unhandled:true"]).formatString(),sort:v.qh.FREQ}}},Z=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{pathname:`/organizations/${e}/issues/`,query:{...n,project:t,query:new f.MY([`release:${r}`,"error.handled:true"]).formatString(),sort:v.qh.FREQ}}},N=e=>e.status===m.dE.Archived;function b(e){const t=l()().subtract(90,"days"),{lastEvent:r,currentProjectMeta:n,dateCreated:s}=e||{},{sessionsUpperBound:a}=n||{};let o="normal",i=l()(s).startOf("minute"),d=l()((l()(a).isAfter(r)?a:r)??void 0).endOf("minute");return l()(i).isSame(d,"minute")&&(d=l()(d).add(1,"minutes")),i.isBefore(t)&&(i=t,o="clamped",(d.isBefore(i)||!(0,g.ri)(a)&&!(0,g.ri)(r))&&(d=l()(),o="ancient")),{type:o,releaseStart:i.utc().format(),releaseEnd:d.utc().format()}}function T(e){let{location:t,releaseBounds:r}=e;const n=(0,c.fK)(s()(t.query,[...Object.values(p.nF),...Object.values(p.V),"cursor"]),{allowAbsolutePageDatetime:!0,allowEmptyPeriod:!0});return Object.keys(n).some((e=>[p.nF.START,p.nF.END,p.nF.UTC,p.nF.PERIOD].includes(e)))||(n[p.nF.START]=r.releaseStart,n[p.nF.END]=r.releaseEnd),n}const C=(0,y.tZ)(d.Z,{href:"https://docs.sentry.io/product/releases/health/#adoption-stages"}),j={low_adoption:{name:(0,h.t)("Low Adoption"),tooltipTitle:(0,h._N)("This release has a low percentage of sessions compared to other releases in this project. [link:Learn more]",{link:C}),type:"warning"},adopted:{name:(0,h.t)("Adopted"),tooltipTitle:(0,h._N)("This release has a high percentage of sessions compared to other releases in this project. [link:Learn more]",{link:C}),type:"success"},replaced:{name:(0,h.t)("Replaced"),tooltipTitle:(0,h._N)("This release was previously Adopted, but now has a lower level of sessions compared to other releases in this project. [link:Learn more]",{link:C}),type:"default"}},L=e=>[...u.ai,...u.gv].includes(e);function D(e){return`release:"${e.replace(/"/g,'\\"')}"`}},"./app/views/releases/utils/sessionTerm.tsx":(e,t,r)=>{r.d(t,{RE:()=>d,U1:()=>a,_k:()=>s,w0:()=>o});var n=r("./app/locale.tsx");let s;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption",e.ANR_RATE="anr-rate",e.FOREGROUND_ANR_RATE="foreground-anr-rate"}(s||(s={}));const a={[s.CRASHES]:(0,n.t)("Crashes"),[s.CRASHED]:(0,n.t)("Crashed"),[s.ABNORMAL]:(0,n.t)("Abnormal"),[s.CRASH_FREE_USERS]:(0,n.t)("Crash Free Users"),[s.CRASH_FREE_SESSIONS]:(0,n.t)("Crash Free Sessions"),[s.HEALTHY]:(0,n.t)("Healthy"),[s.ERRORED]:(0,n.t)("Errored"),[s.UNHANDLED]:(0,n.t)("Unhandled"),[s.ADOPTION]:(0,n.t)("Adoption"),[s.ANR_RATE]:(0,n.t)("ANR Rate"),[s.FOREGROUND_ANR_RATE]:(0,n.t)("Foreground ANR Rate"),otherCrashed:(0,n.t)("Other Crashed"),otherAbnormal:(0,n.t)("Other Abnormal"),otherErrored:(0,n.t)("Other Errored"),otherHealthy:(0,n.t)("Other Healthy"),otherCrashFreeUsers:(0,n.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,n.t)("Other Crash Free Sessions"),otherReleases:(0,n.t)("Other Releases")},o={[s.CRASHES]:(0,n.t)("Number of sessions with a crashed state"),[s.CRASH_FREE]:(0,n.t)("Percentage of sessions/users who did not experience a crash."),[s.CRASH_FREE_USERS]:(0,n.t)("Percentage of unique users with non-crashed sessions"),[s.CRASH_FREE_SESSIONS]:(0,n.t)("Percentage of non-crashed sessions"),[s.STABILITY]:(0,n.t)("The percentage of crash free sessions."),[s.ADOPTION]:(0,n.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[s.CRASHED]:(0,n.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[s.CRASH_FREE_SESSIONS]:(0,n.t)("Percentage of non-crashed sessions"),[s.ABNORMAL]:(0,n.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[s.HEALTHY]:(0,n.t)("A session without errors"),[s.ERRORED]:(0,n.t)("A session with errors"),[s.UNHANDLED]:(0,n.t)("Not handled by user code")},l={crashed:(0,n.t)("The application crashed with a hard crash (eg. segfault)"),[s.ABNORMAL]:(0,n.t)("The application did not properly end the session, for example, due to force-quit"),[s.HEALTHY]:(0,n.t)("The application exited normally and did not observe any errors"),[s.ERRORED]:(0,n.t)("The application exited normally but observed error events while running"),[s.UNHANDLED]:(0,n.t)("The application crashed with a hard crash")};function d(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:e?.split("-")[0]){case"dotnet":case"java":return{...o,...i};case"java-spring":case"dotnet-aspnetcore":return{...o,...i,[s.CRASHES]:(0,n.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...o,...i,[s.CRASHED]:(0,n.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...o,...i,[s.CRASHED]:(0,n.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...o,[s.CRASHED]:(0,n.t)("During the session an unhandled global error/promise rejection occurred."),[s.ABNORMAL]:(0,n.t)("Non applicable for Javascript."),[s.HEALTHY]:(0,n.t)("No errors were captured during session life-time."),[s.ERRORED]:(0,n.t)("During the session at least one handled error occurred."),[s.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...o,...l};case"rust":return{...o,...l,[s.CRASHED]:(0,n.t)("The application had an unrecoverable error (a panic)")};default:return{...o,[s.CRASHED]:(0,n.t)("Number of users who experienced an unhandled error"),[s.ABNORMAL]:(0,n.t)("An unknown session exit"),[s.HEALTHY]:i.healthy,[s.ERRORED]:i.errored,[s.UNHANDLED]:i.unhandled,[s.ANR_RATE]:(0,n.t)("Percentage of unique users that experienced an App Not Responding (ANR) error"),[s.FOREGROUND_ANR_RATE]:(0,n.t)("Percentage of unique users that experienced an App Not Responding (ANR) error when the app was running in the foreground")}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_sessions_tsx-app_views_performance_trends_changedTransactions_tsx.1305a6b3ef3cf33ecf709afd1bce59de.js.map