"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupReplays_index_tsx"],{"./app/utils/replays/hooks/useReplayList.tsx":(e,s,t)=>{t.d(s,{Z:()=>n});var a=t("../node_modules/react/index.js"),i=t("./app/utils/replays/fetchReplayList.tsx"),o=t("./app/utils/useApi.tsx");const n=function(e){let{eventView:s,location:t,organization:n}=e;const r=(0,o.Z)(),[l,p]=(0,a.useState)({fetchError:void 0,isFetching:!0,pageLinks:null,replays:[]}),u=(0,a.useCallback)((async()=>{r.clear(),p((e=>({...e,isFetching:!0})));const e=await(0,i.ZP)({api:r,organization:n,location:t,eventView:s});p({...e,isFetching:!1})}),[r,n,t,s]);return(0,a.useEffect)((()=>{u()}),[u]),l}},"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,s,t)=>{t.d(s,{Z:()=>r,j:()=>n});var a=t("../node_modules/react/index.js"),i=t("../node_modules/react-router/es/index.js"),o=t("./app/utils/useLocation.tsx");function n(e){let{fieldsToClean:s,newLocation:t,oldPathname:a}=e;const o=s.some((e=>void 0!==t.query[e]));if(t.pathname===a||!o)return;const n=s.reduce(((e,s)=>(e[s]=void 0,e)),{...t.query});i.browserHistory.replace({pathname:t.pathname,query:n})}const r=function(e){let{fieldsToClean:s}=e;const t=(0,o.T)(),r=(0,a.useCallback)((e=>{n({fieldsToClean:s,newLocation:e,oldPathname:t.pathname})}),[t.pathname,s]);(0,a.useEffect)((()=>i.browserHistory.listen(r)),[r])}},"./app/views/organizationGroupDetails/groupReplays/index.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>R});var a=t("./app/components/acl/feature.tsx"),i=t("./app/components/alert.tsx"),o=t("./app/components/layouts/thirds.tsx"),n=t("./app/locale.tsx"),r=t("./app/utils/useOrganization.tsx"),l=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=t("../node_modules/react/index.js"),u=t("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),d=t("../node_modules/@sentry/core/esm/exports.js"),c=t("../node_modules/lodash/first.js"),y=t.n(c),m=t("./app/components/pagination.tsx"),g=t("./app/utils/discover/eventView.tsx"),h=t("./app/utils/discover/genericDiscoverQuery.tsx"),x=t("./app/utils/queryString.tsx"),v=t("./app/utils/replays/fetchReplayList.tsx"),b=t("./app/utils/replays/hooks/useReplayList.tsx"),f=t("./app/utils/useApi.tsx"),w=t("./app/utils/useCleanQueryParamsOnRouteLeave.tsx"),Z=t("./app/utils/useLocation.tsx"),k=t("./app/utils/useMedia.tsx"),L=t("./app/views/replays/replayTable/index.tsx"),j=t("./app/views/replays/replayTable/types.tsx"),C=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function T(e){let{group:s}=e;const t=(0,f.Z)(),a=(0,Z.T)(),i=(0,r.Z)(),o=(0,u.u)(),n=(0,k.Z)(`(min-width: ${o.breakpoints.small})`),[l,c]=(0,p.useState)({pageLinks:null,replayIds:void 0}),[y,b]=(0,p.useState)(),{cursor:T}=a.query,q=(0,p.useCallback)((async()=>{const e=g.ZP.fromSavedQuery({id:"",name:"Errors within replay",version:2,fields:["replayId","count()"],query:`issue.id:${s.id} !replayId:""`,projects:[Number(s.project.id)]});try{const[{data:s},a,o]=await(0,h.AA)(t,`/organizations/${i.slug}/events/`,e.getEventsAPIPayload({query:{cursor:T}}));c({pageLinks:o?.getResponseHeader("Link")??"",replayIds:s.map((e=>String(e.replayId)))})}catch(e){d.Tb(e),b(e)}}),[t,T,i.slug,s.id,s.project.id]),P=(0,p.useMemo)((()=>l.replayIds?g.ZP.fromSavedQuery({id:"",name:"",version:2,fields:v.p8,projects:[Number(s.project.id)],query:`id:[${String(l.replayIds)}]`,orderby:(0,x.ro)(a.query.sort,v.yw)}):null),[a.query.sort,s.project.id,l.replayIds]);return(0,w.Z)({fieldsToClean:["cursor"]}),(0,p.useEffect)((()=>{q()}),[q]),P?(0,C.tZ)(_,{eventView:P,organization:i,pageLinks:l.pageLinks}):(0,C.BX)(M,{withPadding:!0,children:[(0,C.tZ)(L.Z,{fetchError:y,isFetching:!0,replays:[],sort:void 0,visibleColumns:[j.M.session,...n?[j.M.startedAt]:[],j.M.duration,j.M.countErrors,j.M.activity]}),(0,C.tZ)(m.Z,{pageLinks:null})]})}T.displayName="GroupReplays";const _=e=>{let{eventView:s,organization:t,pageLinks:a}=e;const i=(0,p.useMemo)((()=>({query:{}})),[]),o=(0,u.u)(),n=(0,k.Z)(`(min-width: ${o.breakpoints.small})`),{replays:r,isFetching:l,fetchError:d}=(0,b.Z)({eventView:s,location:i,organization:t});return(0,C.BX)(M,{withPadding:!0,children:[(0,C.tZ)(L.Z,{fetchError:d,isFetching:l,replays:r,sort:y()(s.sorts),visibleColumns:[j.M.session,...n?[j.M.startedAt]:[],j.M.duration,j.M.countErrors,j.M.activity]}),(0,C.tZ)(m.Z,{pageLinks:a})]})};_.displayName="GroupReplaysTable";const M=(0,l.Z)(o.T3,{target:"ebxunqn0"})("box-shadow:0px 0px 1px ",(e=>e.theme.gray200),";background-color:",(e=>e.theme.background),";"),q=T,P=e=>{const s=(0,r.Z)();return(0,C.tZ)(a.Z,{features:["session-replay-ui"],organization:s,renderDisabled:function(){return(0,C.tZ)(o.T3,{withPadding:!0,children:(0,C.tZ)(i.bZ,{type:"warning",children:(0,n.t)("You don't have access to this feature")})})},children:(0,C.tZ)(q,{...e})})};P.displayName="GroupReplaysContainer";const R=P}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupReplays_index_tsx.e8885ed0cb4087523a52ed97b216d653.js.map