"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupUserFeedback_tsx"],{"./app/views/organizationGroupDetails/groupUserFeedback.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/isEqual.js"),n=s.n(r),a=s("./app/components/events/userFeedback.tsx"),u=s("./app/components/layouts/thirds.tsx"),c=s("./app/components/loadingError.tsx"),p=s("./app/components/loadingIndicator.tsx"),d=s("./app/components/pagination.tsx"),l=s("./app/utils/withOrganization.tsx"),h=s("./app/views/userFeedback/userFeedbackEmpty.tsx"),g=s("./app/views/organizationGroupDetails/utils.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends i.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!0,error:!1,reportList:[],pageLinks:""}),(0,o.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1}),(0,g.g5)(this.props.group.id,{...this.props.params,cursor:this.props.location.query.cursor||""}).then((e=>{let[t,s,o]=e;this.setState({error:!1,loading:!1,reportList:t,pageLinks:o?.getResponseHeader("Link")})})).catch((()=>{this.setState({error:!0,loading:!1})}))}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){n()(e.params,this.props.params)&&e.location.pathname===this.props.location.pathname&&e.location.search===this.props.location.search||this.fetchData()}render(){const{reportList:e,loading:t,error:s}=this.state,{organization:o,group:i}=this.props;return t?(0,f.tZ)(p.Z,{}):s?(0,f.tZ)(c.Z,{onRetry:this.fetchData}):e.length?(0,f.tZ)(u.uT,{children:(0,f.BX)(u.or,{children:[e.map(((e,t)=>(0,f.tZ)(a.o,{report:e,orgId:o.slug,issueId:i.id},t))),(0,f.tZ)(d.Z,{pageLinks:this.state.pageLinks,...this.props})]})}):(0,f.tZ)(u.uT,{children:(0,f.tZ)(u.or,{fullWidth:!0,children:(0,f.tZ)(h.X,{projectIds:[i.project.id]})})})}}m.displayName="GroupUserFeedback";const b=(0,l.Z)(m)},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>f,M3:()=>b,MN:()=>c,V7:()=>p,dG:()=>l,g5:()=>d,m7:()=>m,sC:()=>g});var o=s("../node_modules/lodash/orderBy.js"),i=s.n(o),r=s("./app/actionCreators/group.tsx"),n=s("./app/api.tsx"),a=s("./app/locale.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");async function c(e,t,s,o,i,r){const n="latest"===o||"oldest"===o?`/issues/${s}/events/${o}/`:`/projects/${t}/${r}/events/${o}/?group_id=${s}`,a={};return 0!==i.length&&(a.environment=i),await e.requestPromise(n,{query:a})}function p(e,t,s,o){(0,r.Gv)(e,{orgId:t,projectId:s,itemIds:[o],failSilently:!0,data:{hasSeen:!0}},{})}function d(e,t){return(new n.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function l(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const h={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a._N)("You have [link:disabled workflow notifications] for this project.",{link:t?(0,u.tZ)("span",{}):(0,u.tZ)("a",{href:"/account/settings/notifications/"})});if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&h.hasOwnProperty(t))return h[t]}return(0,a._N)("You're receiving updates because you are [link:subscribed to workflow notifications] for this project.",{link:t?(0,u.tZ)("span",{}):(0,u.tZ)("a",{href:"/account/settings/notifications/"})})}function f(e){return i()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let m;function b(e,t){const{status:s,count:o,activity:i}=e,r=Number(o);switch(s){case"reprocessing":return m.REPROCESSING;case"unresolved":return"reprocess"===(t??f(i))?.type?0===r?m.REPROCESSED_AND_HASNT_EVENT:m.REPROCESSED_AND_HAS_EVENT:m.NO_STATUS;default:return m.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(m||(m={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupUserFeedback_tsx.0670a2c902b1de13d4b2c1744080ca3a.js.map