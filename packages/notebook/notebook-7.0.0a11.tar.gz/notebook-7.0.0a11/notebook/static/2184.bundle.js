"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[2184],{42184:(e,n,a)=>{a.r(n),a.d(n,{default:()=>w});var t=a(63156),o=a(50645),i=a(33721),r=a(21633),s=a(90877),l=a(57336),d=a(13023),c=a(24134),u=a(25899),g=a(88924),b=a(20139),v=a(79657),p=a(82589);const m={id:"@jupyterlab/debugger-extension:consoles",autoStart:!0,requires:[l.IDebugger,r.IConsoleTracker],optional:[t.ILabShell],activate:(e,n,a,t)=>{const o=new l.Debugger.Handler({type:"console",shell:e.shell,service:n}),i=async n=>{const{sessionContext:a}=n;await a.ready,await o.updateContext(n,a),e.commands.notifyCommandChanged()};t?t.currentChanged.connect(((e,n)=>{const a=n.newValue;a instanceof r.ConsolePanel&&i(a)})):a.currentChanged.connect(((e,n)=>{n&&i(n)}))}},h={id:"@jupyterlab/debugger-extension:files",autoStart:!0,requires:[l.IDebugger,c.IEditorTracker],optional:[t.ILabShell],activate:(e,n,a,t)=>{const o=new l.Debugger.Handler({type:"file",shell:e.shell,service:n}),i={},r=async n=>{const a=e.serviceManager.sessions;try{const t=await a.findByPath(n.context.path);if(!t)return;let r=i[t.id];r||(r=a.connectTo({model:t}),i[t.id]=r),await o.update(n,r),e.commands.notifyCommandChanged()}catch(e){return}};t?t.currentChanged.connect(((e,n)=>{const a=n.newValue;if(a instanceof d.DocumentWidget){const{content:e}=a;e instanceof c.FileEditor&&r(a)}})):a.currentChanged.connect(((e,n)=>{n&&r(n)}))}},I={id:"@jupyterlab/debugger-extension:notebooks",autoStart:!0,requires:[l.IDebugger,g.INotebookTracker,p.ITranslator],optional:[t.ILabShell,o.ICommandPalette],provides:l.IDebuggerHandler,activate:(e,n,a,t,i,r)=>{const s=new l.Debugger.Handler({type:"notebook",shell:e.shell,service:n}),d=t.load("jupyterlab");e.commands.addCommand(l.Debugger.CommandIDs.restartDebug,{label:d.__("Restart Kernel and Debug…"),caption:d.__("Restart Kernel and Debug…"),isEnabled:()=>n.isStarted,execute:async()=>{const e=n.getDebuggerState();await n.stop();const t=a.currentWidget;if(!t)return;const{content:i,sessionContext:r}=t;await o.sessionContextDialogs.restart(r)&&(await n.restoreDebuggerState(e),await s.updateWidget(t,r.session),await g.NotebookActions.runAll(i,r))}});const c=async n=>{if(n){const{sessionContext:e}=n;await e.ready,await s.updateContext(n,e)}e.commands.notifyCommandChanged()};return i?i.currentChanged.connect(((e,n)=>{const a=n.newValue;a instanceof g.NotebookPanel&&c(a)})):a.currentChanged.connect(((e,n)=>{n&&c(n)})),r&&r.addItem({category:"Notebook Operations",command:l.Debugger.CommandIDs.restartDebug}),s}},C={id:"@jupyterlab/debugger-extension:service",autoStart:!0,provides:l.IDebugger,requires:[l.IDebuggerConfig],optional:[l.IDebuggerSources,p.ITranslator],activate:(e,n,a,t)=>new l.Debugger.Service({config:n,debuggerSources:a,specsManager:e.serviceManager.kernelspecs,translator:t})},y={id:"@jupyterlab/debugger-extension:config",provides:l.IDebuggerConfig,autoStart:!0,activate:()=>new l.Debugger.Config},_={id:"@jupyterlab/debugger-extension:sources",autoStart:!0,provides:l.IDebuggerSources,requires:[l.IDebuggerConfig,i.IEditorServices],optional:[g.INotebookTracker,r.IConsoleTracker,c.IEditorTracker],activate:(e,n,a,t,o,i)=>new l.Debugger.Sources({config:n,shell:e.shell,editorServices:a,notebookTracker:t,consoleTracker:o,editorTracker:i})},D={id:"@jupyterlab/debugger-extension:variables",autoStart:!0,requires:[l.IDebugger,l.IDebuggerHandler,p.ITranslator],optional:[o.IThemeManager,b.IRenderMimeRegistry],activate:(e,n,a,t,i,r)=>{const s=t.load("jupyterlab"),{commands:d,shell:c}=e,u=new o.WidgetTracker({namespace:"debugger/inspect-variable"}),b=new o.WidgetTracker({namespace:"debugger/render-variable"}),v=l.Debugger.CommandIDs;d.addCommand(v.inspectVariable,{label:s.__("Inspect Variable"),caption:s.__("Inspect Variable"),isEnabled:e=>{var a,t,o,i;return!!(null===(a=n.session)||void 0===a?void 0:a.isStarted)&&(null!==(i=null!==(t=e.variableReference)&&void 0!==t?t:null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.variablesReference)&&void 0!==i?i:0)>0},execute:async e=>{var a,t,r,s;let{variableReference:g,name:b}=e;g||(g=null===(a=n.model.variables.selectedVariable)||void 0===a?void 0:a.variablesReference),b||(b=null===(t=n.model.variables.selectedVariable)||void 0===t?void 0:t.name);const v=`jp-debugger-variable-${b}`;if(!b||!g||u.find((e=>e.id===v)))return;const p=await n.inspectVariable(g);if(!p||0===p.length)return;const m=n.model.variables,h=new o.MainAreaWidget({content:new l.Debugger.VariablesGrid({model:m,commands:d,scopes:[{name:b,variables:p}],themeManager:i})});h.addClass("jp-DebuggerVariables"),h.id=v,h.title.icon=l.Debugger.Icons.variableIcon,h.title.label=`${null===(s=null===(r=n.session)||void 0===r?void 0:r.connection)||void 0===s?void 0:s.name} - ${b}`,u.add(h);const I=()=>{h.dispose(),m.changed.disconnect(I)};m.changed.connect(I),c.add(h,"main",{mode:u.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),d.addCommand(v.renderMimeVariable,{label:s.__("Render Variable"),caption:s.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)},isVisible:()=>n.model.hasRichVariableRendering&&(null!==r||a.activeWidget instanceof g.NotebookPanel),execute:e=>{var o,i,s,d,u,v,p,m;let{name:h,frameId:I}=e;h||(h=null===(o=n.model.variables.selectedVariable)||void 0===o?void 0:o.name),I||(I=null===(i=n.model.callstack.frame)||void 0===i?void 0:i.id);const C=a.activeWidget;let y=C instanceof g.NotebookPanel?C.content.rendermime:r;if(!y)return;const _=`jp-debugger-variable-mime-${h}-${null===(d=null===(s=n.session)||void 0===s?void 0:s.connection)||void 0===d?void 0:d.path.replace("/","-")}`;if(!h||b.find((e=>e.id===_))||!I&&n.hasStoppedThreads())return;const D=n.model.variables,f=new l.Debugger.VariableRenderer({dataLoader:()=>n.inspectRichVariable(h,I),rendermime:y,translator:t});f.addClass("jp-DebuggerRichVariable"),f.id=_,f.title.icon=l.Debugger.Icons.variableIcon,f.title.label=`${h} - ${null===(v=null===(u=n.session)||void 0===u?void 0:u.connection)||void 0===v?void 0:v.name}`,f.title.caption=`${h} - ${null===(m=null===(p=n.session)||void 0===p?void 0:p.connection)||void 0===m?void 0:m.path}`,b.add(f);const S=()=>{f.dispose(),D.changed.disconnect(w),null==C||C.disposed.disconnect(S)},w=()=>{a.activeWidget===C&&f.refresh()};f.disposed.connect(S),D.changed.connect(w),null==C||C.disposed.connect(S),c.add(f,"main",{mode:b.currentWidget?"split-right":"split-bottom",activate:!1,type:"Debugger Variables"})}}),d.addCommand(v.copyToClipboard,{label:s.__("Copy to Clipboard"),caption:s.__("Copy text representation of the value to clipboard"),isEnabled:()=>{var e,a;return!!(null===(e=n.session)||void 0===e?void 0:e.isStarted)&&!!(null===(a=n.model.variables.selectedVariable)||void 0===a?void 0:a.value)},isVisible:()=>a.activeWidget instanceof g.NotebookPanel,execute:async()=>{const e=n.model.variables.selectedVariable.value;e&&o.Clipboard.copyToSystem(e)}})}},f={id:"@jupyterlab/debugger-extension:sidebar",provides:l.IDebuggerSidebar,requires:[l.IDebugger,i.IEditorServices,p.ITranslator],optional:[o.IThemeManager,v.ISettingRegistry],autoStart:!0,activate:async(e,n,a,t,o,i)=>{const{commands:r}=e,s=l.Debugger.CommandIDs,d={registry:r,continue:s.debugContinue,terminate:s.terminate,next:s.next,stepIn:s.stepIn,stepOut:s.stepOut,evaluate:s.evaluate},c={registry:r,pause:s.pauseOnExceptions},u=new l.Debugger.Sidebar({service:n,callstackCommands:d,breakpointsCommands:c,editorServices:a,themeManager:o,translator:t});if(i){const e=await i.load(S.id),a=()=>{var a,t,o,i;const r=e.get("variableFilters").composite,s=null!==(i=null===(o=null===(t=null===(a=n.session)||void 0===a?void 0:a.connection)||void 0===t?void 0:t.kernel)||void 0===o?void 0:o.name)&&void 0!==i?i:"";s&&r[s]&&(u.variables.filter=new Set(r[s]));const l=e.get("defaultKernelSourcesFilter").composite;u.kernelSources.filter=l};a(),e.changed.connect(a),n.sessionChanged.connect(a)}return u}},S={id:"@jupyterlab/debugger-extension:main",requires:[l.IDebugger,l.IDebuggerSidebar,i.IEditorServices,p.ITranslator],optional:[o.ICommandPalette,l.IDebuggerSources,t.ILabShell,t.ILayoutRestorer,u.ILoggerRegistry,v.ISettingRegistry],autoStart:!0,activate:async(e,n,a,t,o,i,r,d,c,u,g)=>{var v;const p=o.load("jupyterlab"),{commands:m,shell:h,serviceManager:I}=e,{kernelspecs:C}=I,y=l.Debugger.CommandIDs;if("true"!==s.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()){await C.ready;const e=null===(v=C.specs)||void 0===v?void 0:v.kernelspecs;if(!e)return;const n=Object.keys(e).some((n=>{var a,t,o;return!(null===(o=null===(t=null===(a=e[n])||void 0===a?void 0:a.metadata)||void 0===t?void 0:t.debugger)||void 0===o||!o)}));if(!n)return}const _=new b.RenderMimeRegistry({initialFactories:b.standardRendererFactories});m.addCommand(y.evaluate,{label:p.__("Evaluate Code"),caption:p.__("Evaluate Code"),icon:l.Debugger.Icons.evaluateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{var e,a,o;const i=await(async()=>{var e,a,o;const i=null===(a=null===(e=n.session)||void 0===e?void 0:e.connection)||void 0===a?void 0:a.kernel;if(!i)return"";const r=(await i.info).language_info.name;return null!==(o=null==t?void 0:t.mimeTypeService.getMimeTypeByLanguage({name:r}))&&void 0!==o?o:""})(),r=await l.Debugger.Dialogs.getCode({title:p.__("Evaluate Code"),okLabel:p.__("Evaluate"),cancelLabel:p.__("Cancel"),mimeType:i,rendermime:_}),s=r.value;if(!r.button.accept||!s)return;const d=await n.evaluate(s);if(d){const t=d.result,i=null===(a=null===(e=null==n?void 0:n.session)||void 0===e?void 0:e.connection)||void 0===a?void 0:a.path,r=i?null===(o=null==u?void 0:u.getLogger)||void 0===o?void 0:o.call(u,i):void 0;r?r.log({type:"text",data:t,level:r.level}):console.debug(t)}}}),m.addCommand(y.debugContinue,{label:()=>n.hasStoppedThreads()?p.__("Continue"):p.__("Pause"),caption:()=>n.hasStoppedThreads()?p.__("Continue"):p.__("Pause"),icon:()=>n.hasStoppedThreads()?l.Debugger.Icons.continueIcon:l.Debugger.Icons.pauseIcon,isEnabled:()=>{var e,a;return null!==(a=null===(e=n.session)||void 0===e?void 0:e.isStarted)&&void 0!==a&&a},execute:async()=>{n.hasStoppedThreads()?await n.continue():await n.pause(),m.notifyCommandChanged()}}),m.addCommand(y.terminate,{label:p.__("Terminate"),caption:p.__("Terminate"),icon:l.Debugger.Icons.terminateIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.restart(),m.notifyCommandChanged()}}),m.addCommand(y.next,{label:p.__("Next"),caption:p.__("Next"),icon:l.Debugger.Icons.stepOverIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.next()}}),m.addCommand(y.stepIn,{label:p.__("Step In"),caption:p.__("Step In"),icon:l.Debugger.Icons.stepIntoIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepIn()}}),m.addCommand(y.stepOut,{label:p.__("Step Out"),caption:p.__("Step Out"),icon:l.Debugger.Icons.stepOutIcon,isEnabled:()=>n.hasStoppedThreads(),execute:async()=>{await n.stepOut()}}),m.addCommand(y.pauseOnExceptions,{label:p.__("Enable / Disable pausing on exceptions"),caption:()=>n.isStarted?n.pauseOnExceptionsIsValid()?n.isPausingOnExceptions?p.__("Disable pausing on exceptions"):p.__("Enable pausing on exceptions"):p.__("Kernel does not support pausing on exceptions."):p.__("Enable / Disable pausing on exceptions"),className:"jp-PauseOnExceptions",icon:l.Debugger.Icons.pauseOnExceptionsIcon,isToggled:()=>n.isPausingOnExceptions,isEnabled:()=>n.pauseOnExceptionsIsValid(),execute:async()=>{await n.pauseOnExceptions(!n.isPausingOnExceptions),m.notifyCommandChanged()}});let D=!1;if(g){const e=await g.load(S.id),n=()=>{D=e.get("autoCollapseDebuggerSidebar").composite};n(),e.changed.connect(n)}if(n.eventMessage.connect(((e,n)=>{m.notifyCommandChanged(),d&&"initialized"===n.event?d.activateById(a.id):d&&a.isVisible&&"terminated"===n.event&&D&&d.collapseRight()})),n.sessionChanged.connect((e=>{m.notifyCommandChanged()})),c&&c.add(a,"debugger-sidebar"),a.node.setAttribute("role","region"),a.node.setAttribute("aria-label",p.__("Debugger section")),a.title.caption=p.__("Debugger"),h.add(a,"right",{type:"Debugger"}),m.addCommand(y.showPanel,{label:o.load("jupyterlab").__("Debugger Panel"),execute:()=>{h.activateById(a.id)}}),i){const e=p.__("Debugger");[y.debugContinue,y.terminate,y.next,y.stepIn,y.stepOut,y.evaluate,y.pauseOnExceptions].forEach((n=>{i.addItem({command:n,category:e})}))}if(r){const{model:e}=n,a=new l.Debugger.ReadOnlyEditorFactory({editorServices:t}),o=(e,a)=>{var t,o,i,s,d,c,u,g,b;r.find({focus:!0,kernel:null!==(s=null===(i=null===(o=null===(t=n.session)||void 0===t?void 0:t.connection)||void 0===o?void 0:o.kernel)||void 0===i?void 0:i.name)&&void 0!==s?s:"",path:null!==(u=null===(c=null===(d=n.session)||void 0===d?void 0:d.connection)||void 0===c?void 0:c.path)&&void 0!==u?u:"",source:null!==(b=null===(g=null==a?void 0:a.source)||void 0===g?void 0:g.path)&&void 0!==b?b:""}).forEach((e=>{requestAnimationFrame((()=>{e.reveal().then((()=>{const n=e.get();n&&l.Debugger.EditorHandler.showCurrentLine(n,a.line)}))}))}))},i=(e,t,o)=>{var i,d,c,u,g,b,v;if(!t)return;const{content:p,mimeType:m,path:h}=t,I=r.find({focus:!0,kernel:null!==(u=null===(c=null===(d=null===(i=n.session)||void 0===i?void 0:i.connection)||void 0===d?void 0:d.kernel)||void 0===c?void 0:c.name)&&void 0!==u?u:"",path:null!==(v=null===(b=null===(g=n.session)||void 0===g?void 0:g.connection)||void 0===b?void 0:b.path)&&void 0!==v?v:"",source:h});if(I.length>0)return void(o&&void 0!==o.line&&I.forEach((e=>{e.reveal().then((()=>{var n;null===(n=e.get())||void 0===n||n.revealPosition({line:o.line-1,column:o.column||0})}))})));const C=a.createNewEditor({content:p,mimeType:m,path:h}),y=C.editor,_=new l.Debugger.EditorHandler({debuggerService:n,editorReady:()=>Promise.resolve(y),getEditor:()=>y,path:h,src:y.model.sharedModel});C.disposed.connect((()=>_.dispose())),r.open({label:s.PathExt.basename(h),caption:h,editorWrapper:C});const D=n.model.callstack.frame;D&&l.Debugger.EditorHandler.showCurrentLine(y,D.line)},d=(e,n,a)=>{n&&i(null,n,a)};e.callstack.currentFrameChanged.connect(o),e.sources.currentSourceOpened.connect(i),e.kernelSources.kernelSourceOpened.connect(d),e.breakpoints.clicked.connect((async(e,a)=>{var t;const o=null===(t=a.source)||void 0===t?void 0:t.path,r=await n.getSource({sourceReference:0,path:o});i(null,r,a)}))}}},w=[C,m,h,I,D,f,S,_,y]}}]);