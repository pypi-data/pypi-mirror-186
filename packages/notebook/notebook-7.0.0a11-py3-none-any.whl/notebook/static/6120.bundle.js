(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[6120,4397],{22592:(e,t,s)=>{"use strict";s.d(t,{JG:()=>c,UI:()=>o,Ue:()=>n,Yj:()=>i,Yu:()=>a});const n=()=>new Map,c=e=>{const t=n();return e.forEach(((e,s)=>{t.set(s,e)})),t},a=(e,t,s)=>{let n=e.get(t);return void 0===n&&e.set(t,n=s()),n},o=(e,t)=>{const s=[];for(const[n,c]of e)s.push(t(c,n));return s},i=(e,t)=>{for(const[s,n]of e)if(t(n,s))return!0;return!1}},11182:(e,t,s)=>{"use strict";s.d(t,{Fp:()=>o,GR:()=>r,GW:()=>n,VV:()=>a,Wn:()=>c,sQ:()=>i});const n=Math.floor,c=(Math.ceil,Math.abs),a=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),o=(e,t)=>e>t?e:t,i=(Number.isNaN,Math.pow),r=(Math.sign,e=>0!==e?e<0:1/e<0)},27061:e=>{var t,s,n=e.exports={};function c(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===c||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:c}catch(e){t=c}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var i,r=[],l=!1,h=-1;function d(){l&&i&&(l=!1,i.length?r=i.concat(r):h=-1,r.length&&u())}function u(){if(!l){var e=o(d);l=!0;for(var t=r.length;t;){for(i=r,r=[];++h<t;)i&&i[h].run();h=-1,t=r.length}i=null,l=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];r.push(new f(e,t)),1!==r.length||l||o(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},90157:(e,t,s)=>{"use strict";s.d(t,{Ag:()=>h,GL:()=>l,oy:()=>u,xq:()=>d});var n=s(74833),c=s(66962),a=s(2431),o=s(11182),i=s(12330),r=s(38828);s(57537);class l extends i.y{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=a.ZG();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((s,n)=>{n!==this.clientID&&3e4<=e-s.lastUpdated&&this.states.has(n)&&t.push(n)})),t.length>0&&h(this,t,"timeout")}),o.GW(3e3)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,s=this.meta.get(t),n=void 0===s?0:s.clock+1,c=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:n,lastUpdated:a.ZG()});const o=[],i=[],l=[],h=[];null===e?h.push(t):null==c?null!=e&&o.push(t):(i.push(t),r.Hi(c,e)||l.push(t)),(o.length>0||l.length>0||h.length>0)&&this.emit("change",[{added:o,updated:l,removed:h},"local"]),this.emit("update",[{added:o,updated:i,removed:h},"local"])}setLocalStateField(e,t){const s=this.getLocalState();null!==s&&this.setLocalState({...s,[e]:t})}getStates(){return this.states}}const h=(e,t,s)=>{const n=[];for(let s=0;s<t.length;s++){const c=t[s];if(e.states.has(c)){if(e.states.delete(c),c===e.clientID){const t=e.meta.get(c);e.meta.set(c,{clock:t.clock+1,lastUpdated:a.ZG()})}n.push(c)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},s]),e.emit("update",[{added:[],updated:[],removed:n},s]))},d=(e,t,s=e.states)=>{const c=t.length,a=n.Mf();n.uE(a,c);for(let o=0;o<c;o++){const c=t[o],i=s.get(c)||null,r=e.meta.get(c).clock;n.uE(a,c),n.uE(a,r),n.uw(a,JSON.stringify(i))}return n._f(a)},u=(e,t,s)=>{const n=c.l1(t),o=a.ZG(),i=[],l=[],h=[],d=[],u=c.yg(n);for(let t=0;t<u;t++){const t=c.yg(n);let s=c.yg(n);const a=JSON.parse(c.kf(n)),u=e.meta.get(t),f=e.states.get(t),m=void 0===u?0:u.clock;(m<s||m===s&&null===a&&e.states.has(t))&&(null===a?t===e.clientID&&null!=e.getLocalState()?s++:e.states.delete(t):e.states.set(t,a),e.meta.set(t,{clock:s,lastUpdated:o}),void 0===u&&null!==a?i.push(t):void 0!==u&&null===a?d.push(t):null!==a&&(r.Hi(a,f)||h.push(t),l.push(t)))}(i.length>0||h.length>0||d.length>0)&&e.emit("change",[{added:i,updated:h,removed:d},s]),(i.length>0||l.length>0||d.length>0)&&e.emit("update",[{added:i,updated:l,removed:d},s])}},66120:(e,t,s)=>{"use strict";s.r(t),s.d(t,{WebsocketProvider:()=>P,messageAuth:()=>S,messageAwareness:()=>I,messageQueryAwareness:()=>M,messageSync:()=>k});var n=s(57537),c=s(22592),a=s(47941),o=s(83149);const i=new Map,r="undefined"==typeof BroadcastChannel?class{constructor(e){this.room=e,this.onmessage=null,o.z((t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:a.Gh(t.newValue||"")})))}postMessage(e){o.X.setItem(this.room,a.s3(a.eh(e)))}}:BroadcastChannel,l=e=>c.Yu(i,e,(()=>{const t=new Set,s=new r(e);return s.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:s,subs:t}})),h=(e,t,s=null)=>{const n=l(e);n.bc.postMessage(t),n.subs.forEach((e=>e(t,s)))};var d=s(2431),u=s(74833),f=s(66962);const m=(e,t)=>{u.uE(e,0);const s=n.encodeStateVector(t);u.mP(e,s)},w=(e,t,s)=>{u.uE(e,1),u.mP(e,n.encodeStateAsUpdate(t,s))},g=(e,t,s)=>{try{n.applyUpdate(t,f.HN(e),s)}catch(e){console.error("Caught error while handling a Yjs update",e)}},p=g;var y=s(90157),v=s(12330),b=s(11182),_=s(36498),E=s(27061);const k=0,M=3,I=1,S=2,U=[];U[k]=(e,t,s,n,c)=>{u.uE(e,k);const a=((e,t,s,n)=>{const c=f.yg(e);switch(c){case 0:((e,t,s)=>{w(t,s,f.HN(e))})(e,t,s);break;case 1:g(e,s,n);break;case 2:p(e,s,n);break;default:throw new Error("Unknown message type")}return c})(t,e,s.doc,s);n&&1===a&&!s.synced&&(s.synced=!0)},U[M]=(e,t,s,n,c)=>{u.uE(e,I),u.mP(e,y.xq(s.awareness,Array.from(s.awareness.getStates().keys())))},U[I]=(e,t,s,n,c)=>{y.oy(s.awareness,f.HN(t),s)},U[S]=(e,t,s,n,c)=>{((e,t,s)=>{0===f.yg(e)&&s(0,f.kf(e))})(t,s.doc,((e,t)=>T(s,t)))};const T=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),L=(e,t,s)=>{const n=f.l1(t),c=u.Mf(),a=f.yg(n),o=e.messageHandlers[a];return o?o(c,n,e,s,a):console.error("Unable to compute message"),c},C=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=s=>{e.wsLastMessageReceived=d.ZG();const n=L(e,new Uint8Array(s.data),!0);u.kE(n)>1&&t.send(u._f(n))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,y.Ag(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(C,b.VV(100*b.sQ(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=d.ZG(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const s=u.Mf();if(u.uE(s,k),m(s,e.doc),t.send(u._f(s)),null!==e.awareness.getLocalState()){const s=u.Mf();u.uE(s,I),u.mP(s,y.xq(e.awareness,[e.doc.clientID])),t.send(u._f(s))}},e.emit("status",[{status:"connecting"}])}},H=(e,t)=>{e.wsconnected&&e.ws.send(t),e.bcconnected&&h(e.bcChannel,t,e)};class P extends v.y{constructor(e,t,s,{connect:n=!0,awareness:c=new y.GL(s),params:a={},WebSocketPolyfill:o=WebSocket,resyncInterval:i=-1,maxBackoffTime:r=2500,disableBc:l=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);const f=(e=>_.UI(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"))(a);this.maxBackoffTime=r,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===f.length?"":"?"+f),this.roomname=t,this.doc=s,this._WS=o,this.awareness=c,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=l,this.wsUnsuccessfulReconnects=0,this.messageHandlers=U.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=n,this._resyncInterval=0,i>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=u.Mf();u.uE(e,k),m(e,s),this.ws.send(u._f(e))}}),i)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=L(this,new Uint8Array(e),!1);u.kE(t)>1&&h(this.bcChannel,u._f(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=u.Mf();u.uE(t,k),((e,t)=>{u.uE(e,2),u.mP(e,t)})(t,e),H(this,u._f(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:s},n)=>{const a=e.concat(t).concat(s),o=u.Mf();u.uE(o,I),u.mP(o,y.xq(c,a)),H(this,u._f(o))},this._unloadHandler=()=>{y.Ag(this.awareness,[s.clientID],"window unload")},"undefined"!=typeof window?window.addEventListener("unload",this._unloadHandler):void 0!==E&&E.on("exit",this._unloadHandler),c.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&3e4<d.ZG()-this.wsLastMessageReceived&&this.ws.close()}),3e3),n&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!=typeof window?window.removeEventListener("unload",this._unloadHandler):void 0!==E&&E.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;var e,t;this.bcconnected||(e=this.bcChannel,t=this._bcSubscriber,l(e).subs.add(t),this.bcconnected=!0);const s=u.Mf();u.uE(s,k),m(s,this.doc),h(this.bcChannel,u._f(s),this);const n=u.Mf();u.uE(n,k),w(n,this.doc),h(this.bcChannel,u._f(n),this);const c=u.Mf();u.uE(c,M),h(this.bcChannel,u._f(c),this);const a=u.Mf();u.uE(a,I),u.mP(a,y.xq(this.awareness,[this.doc.clientID])),h(this.bcChannel,u._f(a),this)}disconnectBc(){const e=u.Mf();var t,s;u.uE(e,I),u.mP(e,y.xq(this.awareness,[this.doc.clientID],new Map)),H(this,u._f(e)),this.bcconnected&&(t=this.bcChannel,s=this._bcSubscriber,l(t).subs.delete(s),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(C(this),this.connectBc())}}}}]);