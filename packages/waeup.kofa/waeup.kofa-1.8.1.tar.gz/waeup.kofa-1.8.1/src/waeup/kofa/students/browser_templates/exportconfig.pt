<p class="alert alert-warning"  i18n:domain="waeup.kofa"
   i18n:translate="student_export_warning">
  <strong>NOTICE:</strong>
  Student data exports are very computation intensive.
  Depending on the filter selected and the portal traffic load, exports may take
  longer than 15 minutes. You are advised to export data outside high-traffic
  time periods.
</p>

<br />

<form i18n:domain="waeup.kofa" method="POST">
  <label for="mode" i18n:translate="">
    Exporter (Data Type)
  </label>
  <select id="exporter" name="exporter" class="form-control half" onclick="test()">
    <option tal:repeat="item view/exporters"
            tal:attributes="value python:item[1]">
      <span tal:replace="python: item[0]">Students</span>
    </option>
  </select>
  <br />
  <label for="session" i18n:translate="">
    Current Session
  </label>
  <select name="session" class="form-control half">
    <option tal:repeat="item view/sessions"
            tal:attributes="value python:item[1]">
      <span tal:replace="python: item[0]">2012/2013</span>
    </option>
  </select>
  <br />
  <label for="level" i18n:translate="">
    Current Level
  </label>
  <select name="level" class="form-control half">
    <option tal:repeat="item view/levels"
            tal:attributes="value python:item[1]">
      <span tal:replace="python: item[0]">200</span>
    </option>
  </select>
  <br />
  <label for="mode" i18n:translate="">
    Current Study Mode
  </label>
  <select name="mode" class="form-control half">
    <option tal:repeat="item view/modes"
            tal:attributes="value python:item[1]">
      <span tal:replace="python: item[0]">ug_ft</span>
    </option>
  </select>

  <span id="payment_dates" style="display: none;">
    <br />
    <label for="mode" i18n:translate="">
      Payment Date
    </label>
    <br />
    from
    <input class="datepicker-le-year datepicker-short textType"
           id="payments_start"
           name="payments_start" type="text" value="" />
    to <input class="datepicker-le-year datepicker-short textType"
           id="payments_end"
           name="payments_end" type="text" value="" />
    <br />
  </span>

  <span id="paycat" style="display: none;">
    <br />
    <label for="paycat" i18n:translate="">
      Payment Categories
    </label>
    <select name="paycat" class="form-control half">
      <option tal:repeat="item view/paycats"
              tal:attributes="value python:item[1]">
        <span tal:replace="python: item[0]">schoolfee</span>
      </option>
    </select>
    <br />
  </span>

  <span id="paysession" style="display: none;">
    <br />
    <label for="paysession" i18n:translate="">
      Payment Session
    </label>
    <select name="paysession" class="form-control half">
      <option tal:repeat="item view/sessions"
              tal:attributes="value python:item[1]">
        <span tal:replace="python: item[0]">2018/2019</span>
      </option>
    </select>
    <br />
  </span>

  <span id="level_session" style="display: none;">
    <br />
    <label for="level_session" i18n:translate="">
      Level Session
    </label>
    <select name="level_session" class="form-control half">
      <option tal:repeat="item view/sessions"
              tal:attributes="value python:item[1]">
        <span tal:replace="python: item[0]">2018/2019</span>
      </option>
    </select>
    <br />
  </span>

  <span id="ct_data" style="display: none;">
    <br />
    <label for="mode" i18n:translate="">
      Course Ticket Level
    </label>
    <select name="ct_level" class="form-control half">
      <option tal:repeat="item view/levels"
              tal:attributes="value python:item[1]">
        <span tal:replace="python: item[0]">200</span>
      </option>
    </select>
    <br />
    <label for="mode" i18n:translate="">
      Course Ticket Session
    </label>
    <select name="ct_session" class="form-control half">
      <option tal:repeat="item view/sessions"
              tal:attributes="value python:item[1]">
        <span tal:replace="python: item[0]">2012/2013</span>
      </option>
    </select>
    <br />
    <label for="semester" i18n:translate="">
      Course Ticket Semester
    </label>
    <select name="ct_semester" class="form-control half">
      <option tal:repeat="item view/semesters"
              tal:attributes="value python:item[1]">
        <span tal:replace="python: item[0]">1st Semester</span>
      </option>
    </select>
    <br />
  </span>

  <br />

  <input type="submit" name="START"  i18n:translate=""
    value="Create CSV file"
    class="btn btn-primary" />
</form>

<script type="text/javascript">
  function test() {
      if (document.getElementById('exporter').value == 'bursary' ||
          document.getElementById('exporter').value == 'studentpayments' ||
          document.getElementById('exporter').value == 'accommodationpayments' ||
          document.getElementById('exporter').value == 'trimmedpayments' ||
          document.getElementById('exporter').value == 'unpaidpayments') {
          document.getElementById('payment_dates').style.display = 'block';
          document.getElementById('paycat').style.display = 'block';
          document.getElementById('paysession').style.display = 'block';
          document.getElementById('ct_data').style.display = 'none';
          document.getElementById('level_session').style.display = 'none';

      } else if (document.getElementById('exporter').value == 'coursetickets')  {
          document.getElementById('ct_data').style.display = 'block';
          document.getElementById('payment_dates').style.display = 'none';
          document.getElementById('paycat').style.display = 'none';
          document.getElementById('paysession').style.display = 'none';
          document.getElementById('level_session').style.display = 'none';

      } else if (document.getElementById('exporter').value == 'studentstudylevels' ||
          document.getElementById('exporter').value == 'levelreportdata') {
          document.getElementById('ct_data').style.display = 'none';
          document.getElementById('payment_dates').style.display = 'none';
          document.getElementById('paycat').style.display = 'none';
          document.getElementById('paysession').style.display = 'none';
          document.getElementById('level_session').style.display = 'block';

      } else {
          document.getElementById('ct_data').style.display = 'none';
          document.getElementById('payment_dates').style.display = 'none';
          document.getElementById('paycat').style.display = 'none';
          document.getElementById('paysession').style.display = 'none';
          document.getElementById('level_session').style.display = 'none';
      }
  }
</script>

