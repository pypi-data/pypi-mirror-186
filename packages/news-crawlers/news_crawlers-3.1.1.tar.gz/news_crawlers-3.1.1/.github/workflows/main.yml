name: Tests

on:
  - push
  - pull_request

jobs:
  tox:
    uses: ./.github/workflows/tox.yml
  publish-pypackage:
    if: github.event_name == 'push' && startsWith(github.ref, 'refs/tags')
    needs: tox
    uses: ./.github/workflows/publish-pypi.yml
    secrets: inherit
