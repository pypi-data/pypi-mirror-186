
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.weewx.com/logging/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Overview - weewx documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CInconsolata+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans";--md-code-font:"Inconsolata Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/weewx_ui.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="white">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="weewx documentation" class="md-header__button md-logo" aria-label="weewx documentation" data-md-component="logo">
      
  <img src="../images/logo-weewx.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            weewx documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="white"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/weewx/weewx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    WeeWX GitHub Repository
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart-overview/" class="md-tabs__link">
        Quickstarts
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../usersguide/about-weewx/" class="md-tabs__link">
        User's guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../custom/intro/" class="md-tabs__link">
        Customization guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../guides-overview/" class="md-tabs__link">
        Other guides
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../support/" class="md-tabs__link">
        Support
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="weewx documentation" class="md-nav__button md-logo" aria-label="weewx documentation" data-md-component="logo">
      
  <img src="../images/logo-weewx.png" alt="logo">

    </a>
    weewx documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/weewx/weewx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    WeeWX GitHub Repository
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Quickstarts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Quickstarts" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Quickstarts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart-overview/" class="md-nav__link">
        Quickstart overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../debian/" class="md-nav__link">
        Debian
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redhat/" class="md-nav__link">
        RedHat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../suse/" class="md-nav__link">
        SUSE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pip/" class="md-nav__link">
        pip
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../v5-upgrade/" class="md-nav__link">
        Migrating to V5
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          User's guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User's guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User's guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/about-weewx/" class="md-nav__link">
        About WeeWX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/system-requirements/" class="md-nav__link">
        System requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/installing-weewx/" class="md-nav__link">
        Installing WeeWX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/running-weewx/" class="md-nav__link">
        Running WeeWX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/webserver-integration/" class="md-nav__link">
        Web server integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/backing-up-weewx/" class="md-nav__link">
        Backup & restore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/mysql-mariadb-config/" class="md-nav__link">
        Configuring MySQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/troubleshooting-guide/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9" type="checkbox" id="__nav_2_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_9">
          Reference: options
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference: options" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_9">
          <span class="md-nav__icon md-icon"></span>
          Reference: options
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/general/" class="md-nav__link">
        General options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stations-config/" class="md-nav__link">
        [Station]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdrestful-config/" class="md-nav__link">
        [StdRESTful]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdreport-config/" class="md-nav__link">
        [StdReport]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdconvert-config/" class="md-nav__link">
        [StdConvert]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdcalibrate-config/" class="md-nav__link">
        [StdCalibrate]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdqc-config/" class="md-nav__link">
        [StdQC]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdwxcalculate-config/" class="md-nav__link">
        [StdWXCalculate]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdarchive/" class="md-nav__link">
        [StdArchive]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/stdtimesynch/" class="md-nav__link">
        [StdTimeSynch]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/data-bindings/" class="md-nav__link">
        [DataBindings]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/databases/" class="md-nav__link">
        [Databases]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../usersguide/weewx-config-file/engine/" class="md-nav__link">
        [Engine]
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Customization guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Customization guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Customization guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/custom_reports/" class="md-nav__link">
        Customizing reports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/cheetah/" class="md-nav__link">
        The cheetah generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/image_generator/" class="md-nav__link">
        The image generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/multiple_bindings/" class="md-nav__link">
        Multiple data bindings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/localization/" class="md-nav__link">
        Localization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/service_engine/" class="md-nav__link">
        Customizing the service engine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/database/" class="md-nav__link">
        Customizing the database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/units/" class="md-nav__link">
        Customizing units
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/derived/" class="md-nav__link">
        Derived types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/drivers/" class="md-nav__link">
        Custom drivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/options_ref/" class="md-nav__link">
        Reference: options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom/appendix/" class="md-nav__link">
        Appendix
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Other guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Other guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../guides-overview/" class="md-nav__link">
        Guides overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          weectl
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="weectl" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          weectl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../weectl/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../weectl/station/" class="md-nav__link">
        weectl station
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../weectl/extension/" class="md-nav__link">
        weectl extension
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../weectl/daemon/" class="md-nav__link">
        weectl daemon
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utilities.htm#wee_database_utility" class="md-nav__link">
        wee_database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utilities.htm#wee_debug_utility" class="md-nav__link">
        wee_debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utilities.htm#wee_device_utility" class="md-nav__link">
        wee_device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utilities.htm#wee_import_utility" class="md-nav__link">
        wee_import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utilities.htm#wee_reports_utility" class="md-nav__link">
        wee_reports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utilities.htm#weewxd" class="md-nav__link">
        weewxd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading.htm" class="md-nav__link">
        Upgrade guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../changes/" class="md-nav__link">
        Change log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware.htm" class="md-nav__link">
        Hardware guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devnotes/" class="md-nav__link">
        Notes for developers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware.htm" class="md-nav__link">
        Hardware comparison
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Support
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Support" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        Support
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/weewx/weewx/edit/master/docs/logging.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>Earlier versions of WeeWX use Python's <code>syslog</code> module to log events. It has several disadvantages:
- It works only under versions of *nix. No Windows.
- It can log only to the system log.
- It is inflexible in the formatting it uses.</p>
<p>WeeWX V4 will transition to using Python's <a href="https://docs.python.org/3/library/logging.html"><code>logging</code></a> package. It has several advantages:
- It abstracts out logging destinations, formatting, and filtering, allowing all to be changed at runtime.
- It has destinations that work on Windows.
- It can support email or socket logging.</p>
<p>In short, it is a much more flexible facility. Plus, it's easy to use.</p>
<p>This is a guide to how <code>logging</code> is implemented within WeeWX.</p>
<h1 id="configuring-logging">Configuring logging<a class="headerlink" href="#configuring-logging" title="Permanent link">&para;</a></h1>
<p>The big advantage of the <code>logging</code> module is its ability to be extensively customized. By default, WeeWX makes sensible choices, but you may want to change them. This section is on how to do this.</p>
<p>First, read, or, at least, attempt to read, the section on the <a href="https://docs.python.org/3/library/logging.html#module-logging">schema of the configuration dictionary</a> that <code>logging</code> uses. It's dense and hard to follow, but it will eventually sink in. </p>
<h2 id="defaults">Defaults<a class="headerlink" href="#defaults" title="Permanent link">&para;</a></h2>
<p>With that in mind, here is the default configuration that WeeWX uses (Linux only; the defaults are slightly
different for MacOS):</p>
<p><div class="highlight"><pre><span></span><code><span class="k">[Logging]</span>
<span class="w">    </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="w">    </span><span class="na">disable_existing_loggers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>

<span class="w">    </span><span class="c1"># Root logger</span>
<span class="w">    </span><span class="k">[[root]]</span>
<span class="w">      </span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{log_level}</span>
<span class="w">      </span><span class="na">handlers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rotate,</span>

<span class="w">    </span><span class="c1"># Additional loggers would go in the following section. This is useful for tailoring logging</span>
<span class="w">    </span><span class="c1"># for individual modules.</span>
<span class="w">    </span><span class="k">[[loggers]]</span>

<span class="w">    </span><span class="c1"># Definitions of possible logging destinations</span>
<span class="w">    </span><span class="k">[[handlers]]</span>

<span class="w">        </span><span class="c1"># Log to a set of rotating files    </span>
<span class="w">        </span><span class="k">[[[rotate]]]</span>
<span class="w">            </span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DEBUG</span>
<span class="w">            </span><span class="na">formatter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">standard</span>
<span class="w">            </span><span class="na">class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">logging.handlers.RotatingFileHandler</span>
<span class="w">            </span><span class="na">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/log/weewx.log</span>
<span class="w">            </span><span class="na">maxBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10000000</span>
<span class="w">            </span><span class="na">backupCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4</span>

<span class="w">        </span><span class="c1"># Log to console</span>
<span class="w">        </span><span class="k">[[[console]]]</span>
<span class="w">            </span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DEBUG</span>
<span class="w">            </span><span class="na">formatter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">verbose</span>
<span class="w">            </span><span class="na">class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">logging.StreamHandler</span>
<span class="w">            </span><span class="c1"># Alternate choice is &#39;ext://sys.stderr&#39;</span>
<span class="w">            </span><span class="na">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ext://sys.stdout</span>

<span class="w">    </span><span class="c1"># How to format log messages</span>
<span class="w">    </span><span class="k">[[formatters]]</span>
<span class="w">        </span><span class="k">[[[simple]]]</span>
<span class="w">            </span><span class="na">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;%(levelname)s %(message)s&quot;</span>
<span class="w">        </span><span class="k">[[[standard]]]</span>
<span class="w">            </span><span class="na">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;{process_name}[%(process)d] %(levelname)s %(name)s: %(message)s&quot;</span><span class="w"> </span>
<span class="w">        </span><span class="k">[[[verbose]]]</span>
<span class="w">            </span><span class="na">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;%(asctime)s  {process_name}[%(process)d] %(levelname)s %(name)s: %(message)s&quot;</span>
<span class="w">            </span><span class="c1"># Format to use for dates and times:</span>
<span class="w">            </span><span class="na">datefmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">%Y-%m-%d %H:%M:%S</span>
</code></pre></div>
This configures three different facilities:
1. Loggers, which expose the interface that application code directly uses. Most importantly,
it determines which <em>handler(s)</em> to use. Note that the <code>root</code> logger is in its own section.
2. Handlers, which send the log records (created by loggers) to an appropriate destination.
3. Formatters, which specify the layout of log records in the final output. A number of attributes
 are available to the formatter (such as <code>%(levelname)s</code>; see the documentation 
 <a href="https://docs.python.org/3/library/logging.html#logrecord-attributes"><em>LogRecord attributes</em></a> 
 for a complete list).</p>
<p>The value for <code>{log_level}</code> depends on whether or not the <code>debug</code> option has been set. If it has 
not (the default), then <code>log_level</code> is <code>INFO</code>, otherwise, <code>DEBUG</code>.</p>
<p>The value for <code>{process_name}</code> is passed in when setting up the logging facility. For the WeeWX 
main program, it is <code>weewxd</code> (see below).</p>
<h2 id="specifying-other-handlers">Specifying other handlers<a class="headerlink" href="#specifying-other-handlers" title="Permanent link">&para;</a></h2>
<p>An example. Say you want logs to go to not only the system log (the default), but to the console as 
well. Then add this to your <code>weewx.conf</code> file:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">[Logging]</span>
<span class="w">  </span><span class="k">[[root]]</span>
<span class="w">    </span><span class="na">handlers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">syslog, console</span>
</code></pre></div>
This will override the default list of handlers, which consists only of <code>syslog</code>, with a new list that includes <code>console</code> as well as <code>syslog</code>.</p>
<h2 id="customizing-what-gets-logged">Customizing what gets logged<a class="headerlink" href="#customizing-what-gets-logged" title="Permanent link">&para;</a></h2>
<p>Another example. When the <code>debug</code> option is on, the default "root" logger will show <code>DEBUG</code> messages and above ---basically everything. This is fine, but say you've decided that the <code>weewx.restx</code> module is too chatty for your liking. For it, you want to see only <code>INFO</code> messages and above --- nothing else. </p>
<p>The solution is to tailor the logger used by the <code>weewx.restx</code> module, so it no longer inherits properties from the root logger. For this logger, we will specify that it logs only <code>INFO</code> and above. To do this, the <code>[Logging]</code> section would look like:</p>
<div class="highlight"><pre><span></span><code><span class="k">[Logging]</span>
<span class="w">  </span><span class="k">[[loggers]]</span>
<span class="w">    </span><span class="k">[[[weewx.restx]]]</span>
<span class="w">      </span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">INFO</span>
</code></pre></div>
<p>Or instead, suppose you are debugging the <code>weewx.restx</code> module. In this case it would desirable to set its logging <code>level</code> to <code>DEBUG</code> while other loggers continue to log <code>INFO</code> or higher. Again, the solution is to customize the logger for the <code>weewx.restx</code> module.  In this case, along with setting the logging <code>level</code>, we need to define a <code>handler</code>. Because the <code>weewx.restx</code> logger will handle the logging for the <code>weewx.restx</code> module, we will also want to turn <code>propagate</code> off. Otherwise <code>INFO</code> and higher messages will be logged twice: once by the <code>weewx.restx</code> logger and also by any parent handlers. Lastly, <code>debug</code> should be left at 0, so that the default <code>root</code> logging is <code>INFO</code>.</p>
<p>The configuration would look something like this.
<div class="highlight"><pre><span></span><code><span class="na">debug</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>

<span class="k">[Logging]</span>
<span class="w">  </span><span class="k">[[loggers]]</span>
<span class="w">    </span><span class="k">[[[weewx.restx]]]</span>
<span class="w">      </span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DEBUG</span>
<span class="w">      </span><span class="na">handlers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">syslog,</span>
<span class="w">      </span><span class="na">propagate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>
</code></pre></div></p>
<h2 id="logging-to-rotating-files">Logging to rotating files<a class="headerlink" href="#logging-to-rotating-files" title="Permanent link">&para;</a></h2>
<p>By default, the logging module logs to the "system log". In some cases, you may want to log to a
set of rotating log files, such as <code>/var/log/weewx.log</code>. The WeeWX logging facility allows you
to do this.</p>
<p>Add this to <code>weewx.conf</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">[Logging]</span>
<span class="w">    </span><span class="c1"># Root logger</span>
<span class="w">    </span><span class="k">[[root]]</span>
<span class="w">      </span><span class="na">handlers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rotate,</span><span class="w">                    </span><span class="c1"># 1</span>
<span class="w">    </span><span class="k">[[loggers]]</span>
<span class="w">    </span><span class="k">[[handlers]]</span>
<span class="w">        </span><span class="c1"># Log to a set of rotating files    </span>
<span class="w">        </span><span class="k">[[[rotate]]]</span>
<span class="w">            </span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DEBUG</span><span class="w">                   </span><span class="c1"># 2</span>
<span class="w">            </span><span class="na">formatter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">standard</span><span class="w">            </span><span class="c1"># 3</span>
<span class="w">            </span><span class="na">class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">logging.handlers.RotatingFileHandler</span><span class="w">  </span><span class="c1"># 4</span>
<span class="w">            </span><span class="na">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/log/weewx.log</span><span class="w">   </span><span class="c1"># 5</span>
<span class="w">            </span><span class="na">maxBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10000000</span><span class="w">             </span><span class="c1"># 6</span>
<span class="w">            </span><span class="na">backupCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4</span><span class="w">                 </span><span class="c1"># 7</span>
</code></pre></div>
<p>Here's the meaning of the various lines:</p>
<ol>
<li>This tells the logging facility to use the <code>rotate</code> handler, instead of the default <code>syslog</code>
handler. The comma is important: it tells Python that the option is actually a list.</li>
<li>The default log level will be <code>DEBUG</code>. Everything with priority <code>DEBUG</code> or higher will get 
logged.</li>
<li>How shall the entries get formatted? This tells the logging facility to use the "standard"
formatter. </li>
<li>Option <code>class</code> identifies the class of the handler that to be used. It should be set to
<a href="https://docs.python.org/3/library/logging.handlers.html#rotatingfilehandler"><code>logging.handlers.RotatingFileHandler</code></a>.</li>
<li>Option <code>filename</code> specifies the location of the file in which the logs will appear.</li>
<li>Option <code>maxBytes</code> is how big the file will be allowed to grow before logging is rotated into
a new file.</li>
<li>Option <code>backupCount</code> is how many rotated files to be retained before deletion.  </li>
</ol>
<p>The <code>rotate</code> handler also serves as a good example of overriding default logging behavior.</p>
<h1 id="for-developers">For developers<a class="headerlink" href="#for-developers" title="Permanent link">&para;</a></h1>
<p>What follows is intended for developers who are extending WeeWX.</p>
<h2 id="in-modules">In modules<a class="headerlink" href="#in-modules" title="Permanent link">&para;</a></h2>
<p>It's very easy to use <code>logging</code> from within a module, such as a new service, search list extension, etc. At the top of your code, include</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>
<p>Then whenever you want to log an event, simply call one of</p>
<p><div class="highlight"><pre><span></span><code><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a debug message&quot;</span><span class="p">)</span>
<span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is an informational message&quot;</span><span class="p">)</span>
<span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;This is a warning message&quot;</span><span class="p">)</span>
<span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;This is an error message&quot;</span><span class="p">)</span>
<span class="n">log</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s2">&quot;This is a critical message&quot;</span><span class="p">)</span>
</code></pre></div>
That's it.</p>
<h2 id="in-main-programs">In main programs<a class="headerlink" href="#in-main-programs" title="Permanent link">&para;</a></h2>
<p>If you are writing a utility which will be run as the "main program", then there are a couple extra steps you must take. At the minimum, include the following at the top of your code:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">weeutil.logger</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">weeutil</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="s1">&#39;prog_name&#39;</span><span class="p">,</span> <span class="p">{})</span>
</code></pre></div>
<p>This will set up a default logging configuration, suitable for most situations.</p>
<p>However, if you want the user to be able to customize the logging for your utility, then you need a few extra steps:</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">logging</span>
    <span class="kn">import</span> <span class="nn">weecfg</span>
    <span class="kn">import</span> <span class="nn">weeutil.logger</span>
    <span class="kn">from</span> <span class="nn">weeutil.weeutil</span> <span class="kn">import</span> <span class="n">to_int</span>

    <span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="c1"># Temporarily set up logging using the defaults. This is so you can log</span>
    <span class="c1"># the process of reading in the weewx.conf file</span>
    <span class="n">weeutil</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="s1">&#39;utility_name&#39;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="o">...</span>

    <span class="c1"># This message will use the default logger:</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Attempting to read config file from </span><span class="si">%s</span><span class="s2">&#39; </span><span class="si">% c</span><span class="s2">onfig_path)</span>

    <span class="c1"># Get the config_dict to use</span>
    <span class="n">config_path</span><span class="p">,</span> <span class="n">config_dict</span> <span class="o">=</span> <span class="n">weecfg</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">config_path</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="c1"># Set weewx.debug as necessary:</span>
    <span class="n">weewx</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">to_int</span><span class="p">(</span><span class="n">config_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

    <span class="c1"># Now we can set up the user customized system:</span>
    <span class="n">weeutil</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="s1">&#39;utility_name&#39;</span><span class="p">,</span> <span class="n">config_dict</span><span class="p">)</span>

    <span class="c1"># This message will use the customized logger:</span>
    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully read in weewx.conf&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Note how the pattern first sets up a temporary logging facility, using WeeWX defaults. This is to log the process of reading in the config file. Then, once that is done, it uses the fully customized version.</p>
<h2 id="throttling-logging-events">Throttling logging events<a class="headerlink" href="#throttling-logging-events" title="Permanent link">&para;</a></h2>
<p>The Python <code>logging</code> module makes it very easy to temporarily reduce the number of uninteresting messages going into a log. </p>
<p>Say you're about to call a function which will insert hundreds of records into the database using the <code>addRecord()</code> method of the <code>Manager</code> class. This method logs an <code>INFO</code> event for every insertion, resulting in hundreds of not-terribly-interesting entries. You'd like to temporarily avoid this. Here's how:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># Temporarily disable logging for events at or below INFO</span>
<span class="n">logging</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="n">generate_zillions_of_records</span><span class="p">()</span>

<span class="c1"># Remove the temporary restriction</span>
<span class="n">logging</span><span class="o">.</span><span class="n">disable</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">NOTSET</span><span class="p">)</span>
</code></pre></div>
<p>See the Python docs for more details about <a href="https://docs.python.org/3/library/logging.html#logging.disable"><code>logging.disable()</code></a>.</p>
<h2 id="maintaining-backwards-compatibility">Maintaining backwards compatibility<a class="headerlink" href="#maintaining-backwards-compatibility" title="Permanent link">&para;</a></h2>
<p>If you are an extension writer, you will want to support not only the new style logging, but also the old
<code>syslog</code> style. Here's how you can do it.</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="c1"># Test for new-style weewx logging by trying to import weeutil.logger</span>
    <span class="kn">import</span> <span class="nn">weeutil.logger</span>
    <span class="kn">import</span> <span class="nn">logging</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">logdbg</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">loginf</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">logerr</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="c1"># Old-style weewx logging</span>
    <span class="kn">import</span> <span class="nn">syslog</span>

    <span class="k">def</span> <span class="nf">logmsg</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="c1"># Replace &#39;__name__&#39; with something to identify your application.</span>
        <span class="n">syslog</span><span class="o">.</span><span class="n">syslog</span><span class="p">(</span><span class="n">level</span><span class="p">,</span> <span class="s1">&#39;__name__: </span><span class="si">%s</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">logdbg</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="n">logmsg</span><span class="p">(</span><span class="n">syslog</span><span class="o">.</span><span class="n">LOG_DEBUG</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">loginf</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="n">logmsg</span><span class="p">(</span><span class="n">syslog</span><span class="o">.</span><span class="n">LOG_INFO</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">logerr</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
        <span class="n">logmsg</span><span class="p">(</span><span class="n">syslog</span><span class="o">.</span><span class="n">LOG_ERR</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</code></pre></div>
<p>Now you can just use the functions <code>logdbg()</code>, <code>loginf()</code>, and <code>logerr()</code> in your code, secure in the
knowledge that it will work under both WeeWX V3 and V4.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © Tom Keffer and Matthew Wall, all rights reserved
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>